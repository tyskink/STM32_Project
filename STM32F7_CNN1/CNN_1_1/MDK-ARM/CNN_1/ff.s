; generated by Component: ARM Compiler 5.06 update 4 (build 422) Tool: ArmCC [4d3604]
; commandline ArmCC [--c99 --split_sections --debug -c --asm -ocnn_1\ff.o --depend=cnn_1\ff.d --cpu=Cortex-M7 --fpu=SoftVFP --apcs=interwork -O0 --diag_suppress=9931 -I../Inc -I../Drivers/STM32F7xx_HAL_Driver/Inc -I../Drivers/STM32F7xx_HAL_Driver/Inc/Legacy -I../Middlewares/Third_Party/FatFs/src/drivers -I../Drivers/CMSIS/Device/ST/STM32F7xx/Include -I../Middlewares/Third_Party/FatFs/src -I../Drivers/CMSIS/Include -I..\..\..\..\STM32_Project -I..\..\..\STM32F7_Project -I..\..\..\..\LKML_C\Src -I..\..\..\..\LKML_C -I.\RTE\_CNN_1 -IC:\Keil_v5\ARM\PACK\ARM\CMSIS\5.0.1\CMSIS\Include -IC:\Keil_v5\ARM\PACK\Keil\STM32F7xx_DFP\2.9.0\Drivers\CMSIS\Device\ST\STM32F7xx\Include -D__MICROLIB -D__UVISION_VERSION=523 -D_RTE_ -DSTM32F746xx -DUSE_HAL_DRIVER -DSTM32F746xx --omf_browse=cnn_1\ff.crf ../Middlewares/Third_Party/FatFs/src/ff.c]
        THUMB
        REQUIRE8
        PRESERVE8

        AREA ||i.check_fs||, CODE, READONLY, ALIGN=2

check_fs PROC
        PUSH     {r4-r6,lr}
        MOV      r4,r0
        MOV      r5,r1
        MOVS     r0,#0
        STRB     r0,[r4,#0x204]
        SUBS     r0,r0,#1
        STR      r0,[r4,#0x22c]
        MOV      r1,r5
        MOV      r0,r4
        BL       move_window
        CBZ      r0,|L1.32|
        MOVS     r0,#3
|L1.30|
        POP      {r4-r6,pc}
|L1.32|
        LDRB     r1,[r4,#0x1fe]
        MOV      r0,#0x1ff
        LDRB     r0,[r0,r4]
        ORR      r0,r1,r0,LSL #8
        MOV      r1,#0xaa55
        CMP      r0,r1
        BEQ      |L1.58|
        MOVS     r0,#2
        B        |L1.30|
|L1.58|
        MOVS     r0,#0x39
        LDRB     r0,[r0,r4]
        LSLS     r1,r0,#24
        MOVS     r0,#0x38
        LDRB     r0,[r0,r4]
        ORR      r1,r1,r0,LSL #16
        MOVS     r0,#0x37
        LDRB     r0,[r0,r4]
        ORR      r0,r1,r0,LSL #8
        LDRB     r1,[r4,#0x36]
        ORRS     r0,r0,r1
        BIC      r0,r0,#0xff000000
        LDR      r1,|L1.148|
        CMP      r0,r1
        BNE      |L1.100|
        MOVS     r0,#0
        B        |L1.30|
|L1.100|
        MOVS     r0,#0x55
        LDRB     r0,[r0,r4]
        LSLS     r1,r0,#24
        MOVS     r0,#0x54
        LDRB     r0,[r0,r4]
        ORR      r1,r1,r0,LSL #16
        MOVS     r0,#0x53
        LDRB     r0,[r0,r4]
        ORR      r0,r1,r0,LSL #8
        LDRB     r1,[r4,#0x52]
        ORRS     r0,r0,r1
        BIC      r0,r0,#0xff000000
        LDR      r1,|L1.148|
        CMP      r0,r1
        BNE      |L1.142|
        MOVS     r0,#0
        B        |L1.30|
|L1.142|
        MOVS     r0,#1
        B        |L1.30|
        ENDP

        DCW      0x0000
|L1.148|
        DCD      0x00544146

        AREA ||i.chk_chr||, CODE, READONLY, ALIGN=1

chk_chr PROC
        MOV      r2,r0
        B        |L2.6|
|L2.4|
        ADDS     r2,r2,#1
|L2.6|
        LDRB     r0,[r2,#0]
        CBZ      r0,|L2.16|
        LDRB     r0,[r2,#0]
        CMP      r0,r1
        BNE      |L2.4|
|L2.16|
        LDRB     r0,[r2,#0]
        BX       lr
        ENDP


        AREA ||i.chk_lock||, CODE, READONLY, ALIGN=2

chk_lock PROC
        PUSH     {r4,r5,lr}
        MOV      r2,r0
        MOV      r3,r1
        MOVS     r0,#0
        MOV      r4,r0
        MOV      r1,r0
        B        |L3.88|
|L3.14|
        ADD      r0,r1,r1,LSL #1
        LDR      r5,|L3.140|
        LDR      r0,[r5,r0,LSL #2]
        CBZ      r0,|L3.84|
        ADD      r0,r1,r1,LSL #1
        LDR      r0,[r5,r0,LSL #2]
        LDR      r5,[r2,#0x200]
        CMP      r0,r5
        BNE      |L3.86|
        ADD      r0,r1,r1,LSL #1
        LDR      r5,|L3.140|
        ADD      r0,r5,r0,LSL #2
        LDR      r0,[r0,#4]
        LDR      r5,[r2,#0x208]
        CMP      r0,r5
        BNE      |L3.86|
        ADD      r0,r1,r1,LSL #1
        LDR      r5,|L3.140|
        ADD      r0,r5,r0,LSL #2
        LDRH     r0,[r0,#8]
        LDRH     r5,[r2,#0x206]
        CMP      r0,r5
        BNE      |L3.86|
        B        |L3.92|
|L3.84|
        MOVS     r4,#1
|L3.86|
        ADDS     r1,r1,#1
|L3.88|
        CMP      r1,#0xa
        BCC      |L3.14|
|L3.92|
        NOP      
        CMP      r1,#0xa
        BNE      |L3.112|
        CBNZ     r4,|L3.104|
        CMP      r3,#2
        BNE      |L3.108|
|L3.104|
        MOVS     r0,#0
|L3.106|
        POP      {r4,r5,pc}
|L3.108|
        MOVS     r0,#0x12
        B        |L3.106|
|L3.112|
        CBNZ     r3,|L3.132|
        ADD      r0,r1,r1,LSL #1
        LDR      r5,|L3.140|
        ADD      r0,r5,r0,LSL #2
        LDRH     r0,[r0,#0xa]
        CMP      r0,#0x100
        BNE      |L3.136|
|L3.132|
        MOVS     r0,#0x10
        B        |L3.106|
|L3.136|
        MOVS     r0,#0
        B        |L3.106|
        ENDP

|L3.140|
        DCD      Files

        AREA ||i.clear_lock||, CODE, READONLY, ALIGN=2

clear_lock PROC
        PUSH     {r4,lr}
        MOV      r1,r0
        MOVS     r0,#0
        B        |L4.36|
|L4.8|
        ADD      r2,r0,r0,LSL #1
        LDR      r3,|L4.44|
        LDR      r2,[r3,r2,LSL #2]
        CMP      r2,r1
        BNE      |L4.34|
        MOVS     r2,#0
        ADD      r3,r0,r0,LSL #1
        LDR      r4,|L4.44|
        STR      r2,[r4,r3,LSL #2]
|L4.34|
        ADDS     r0,r0,#1
|L4.36|
        CMP      r0,#0xa
        BCC      |L4.8|
        POP      {r4,pc}
        ENDP

        DCW      0x0000
|L4.44|
        DCD      Files

        AREA ||i.clmt_clust||, CODE, READONLY, ALIGN=1

clmt_clust PROC
        PUSH     {r4-r6,lr}
        MOV      r3,r0
        MOV      r5,r1
        LDR      r0,[r3,#0x224]
        ADDS     r2,r0,#4
        LSRS     r0,r5,#9
        LDR      r6,[r3,#0x200]
        LDRB     r6,[r6,#0x202]
        UDIV     r4,r0,r6
        NOP      
|L5.28|
        LDM      r2!,{r1}
        CBNZ     r1,|L5.36|
        MOVS     r0,#0
|L5.34|
        POP      {r4-r6,pc}
|L5.36|
        CMP      r4,r1
        BCS      |L5.42|
        B        |L5.48|
|L5.42|
        SUBS     r4,r4,r1
        ADDS     r2,r2,#4
        B        |L5.28|
|L5.48|
        NOP      
        LDR      r0,[r2,#0]
        ADD      r0,r0,r4
        B        |L5.34|
        ENDP


        AREA ||i.clust2sect||, CODE, READONLY, ALIGN=1

clust2sect PROC
        MOV      r2,r0
        SUBS     r1,r1,#2
        LDR      r0,[r2,#0x214]
        SUBS     r0,r0,#2
        CMP      r0,r1
        BHI      |L6.18|
        MOVS     r0,#0
|L6.16|
        BX       lr
|L6.18|
        LDRB     r3,[r2,#0x202]
        LDR      r0,[r2,#0x228]
        MLA      r0,r1,r3,r0
        B        |L6.16|
        ENDP


        AREA ||i.cmp_lfn||, CODE, READONLY, ALIGN=2

cmp_lfn PROC
        PUSH     {r4-r10,lr}
        MOV      r5,r0
        MOV      r4,r1
        LDRB     r0,[r4,#0]
        BIC      r0,r0,#0x40
        SUBS     r0,r0,#1
        ADD      r1,r0,r0,LSL #2
        ADD      r6,r1,r0,LSL #3
        MOVS     r7,#0
        MOV      r8,#1
        NOP      
|L7.32|
        LDR      r0,|L7.140|
        LDRB     r0,[r0,r7]
        LDRB     r0,[r4,r0]
        LDR      r1,|L7.140|
        LDRB     r1,[r1,r7]
        ADD      r1,r1,r4
        LDRB     r1,[r1,#1]
        ORR      r9,r0,r1,LSL #8
        CMP      r8,#0
        BEQ      |L7.90|
        MOV      r0,r9
        BL       ff_wtoupper
        MOV      r8,r0
        CMP      r6,#0xff
        BCS      |L7.84|
        MOV      r1,r6
        ADDS     r6,r6,#1
        LDRH     r0,[r5,r1,LSL #1]
        BL       ff_wtoupper
        CMP      r0,r8
        BEQ      |L7.102|
|L7.84|
        MOVS     r0,#0
|L7.86|
        POP      {r4-r10,pc}
|L7.90|
        MOV      r0,#0xffff
        CMP      r9,r0
        BEQ      |L7.102|
        MOVS     r0,#0
        B        |L7.86|
|L7.102|
        ADDS     r0,r7,#1
        MOV      r7,r0
        CMP      r0,#0xd
        BCC      |L7.32|
        LDRB     r0,[r4,#0]
        AND      r0,r0,#0x40
        CBZ      r0,|L7.134|
        CMP      r8,#0
        BEQ      |L7.134|
        LDRH     r0,[r5,r6,LSL #1]
        CBZ      r0,|L7.134|
        MOVS     r0,#0
        B        |L7.86|
|L7.134|
        MOVS     r0,#1
        B        |L7.86|
        ENDP

        DCW      0x0000
|L7.140|
        DCD      LfnOfs

        AREA ||i.create_chain||, CODE, READONLY, ALIGN=1

create_chain PROC
        PUSH     {r4-r10,lr}
        MOV      r4,r0
        MOV      r9,r1
        CMP      r9,#0
        BNE      |L8.32|
        LDR      r7,[r4,#0x20c]
        CBZ      r7,|L8.28|
        LDR      r0,[r4,#0x214]
        CMP      r0,r7
        BHI      |L8.74|
|L8.28|
        MOVS     r7,#1
        B        |L8.74|
|L8.32|
        MOV      r1,r9
        MOV      r0,r4
        BL       get_fat
        MOV      r6,r0
        CMP      r6,#2
        BCS      |L8.52|
        MOVS     r0,#1
|L8.48|
        POP      {r4-r10,pc}
|L8.52|
        ADDS     r0,r6,#1
        CBNZ     r0,|L8.60|
        MOV      r0,r6
        B        |L8.48|
|L8.60|
        LDR      r0,[r4,#0x214]
        CMP      r0,r6
        BLS      |L8.72|
        MOV      r0,r6
        B        |L8.48|
|L8.72|
        MOV      r7,r9
|L8.74|
        MOV      r5,r7
        NOP      
|L8.78|
        ADDS     r5,r5,#1
        LDR      r0,[r4,#0x214]
        CMP      r0,r5
        BHI      |L8.98|
        MOVS     r5,#2
        CMP      r5,r7
        BLS      |L8.98|
        MOVS     r0,#0
        B        |L8.48|
|L8.98|
        MOV      r1,r5
        MOV      r0,r4
        BL       get_fat
        MOV      r6,r0
        CBNZ     r6,|L8.112|
        B        |L8.132|
|L8.112|
        ADDS     r0,r6,#1
        CBZ      r0,|L8.120|
        CMP      r6,#1
        BNE      |L8.124|
|L8.120|
        MOV      r0,r6
        B        |L8.48|
|L8.124|
        CMP      r5,r7
        BNE      |L8.78|
        MOVS     r0,#0
        B        |L8.48|
|L8.132|
        NOP      
        MVN      r2,#0xf0000000
        MOV      r1,r5
        MOV      r0,r4
        BL       put_fat
        MOV      r8,r0
        CMP      r8,#0
        BNE      |L8.172|
        CMP      r9,#0
        BEQ      |L8.172|
        MOV      r2,r5
        MOV      r1,r9
        MOV      r0,r4
        BL       put_fat
        MOV      r8,r0
|L8.172|
        CMP      r8,#0
        BNE      |L8.214|
        STR      r5,[r4,#0x20c]
        LDR      r0,[r4,#0x210]
        ADDS     r0,r0,#1
        CBZ      r0,|L8.230|
        LDR      r0,[r4,#0x210]
        SUBS     r0,r0,#1
        STR      r0,[r4,#0x210]
        LDRB     r0,[r4,#0x205]
        ORR      r0,r0,#1
        STRB     r0,[r4,#0x205]
        B        |L8.230|
|L8.214|
        CMP      r8,#1
        BNE      |L8.226|
        MOV      r0,#0xffffffff
        B        |L8.228|
|L8.226|
        MOVS     r0,#1
|L8.228|
        MOV      r5,r0
|L8.230|
        MOV      r0,r5
        B        |L8.48|
        ENDP


        AREA ||i.create_name||, CODE, READONLY, ALIGN=2

create_name PROC
        PUSH     {r0,r1,r4-r11,lr}
        SUB      sp,sp,#0xc
        MOV      r10,r0
        LDR      r0,[sp,#0x10]
        LDR      r11,[r0,#0]
        B        |L9.20|
|L9.16|
        ADD      r11,r11,#1
|L9.20|
        LDRB     r0,[r11,#0]
        CMP      r0,#0x2f
        BEQ      |L9.16|
        LDRB     r0,[r11,#0]
        CMP      r0,#0x5c
        BEQ      |L9.16|
        LDR      r9,[r10,#0x220]
        MOVS     r5,#0
        MOV      r6,r5
        NOP      
|L9.46|
        MOV      r0,r6
        ADDS     r6,r6,#1
        LDRB     r4,[r11,r0]
        CMP      r4,#0x20
        BLT      |L9.66|
        CMP      r4,#0x2f
        BEQ      |L9.66|
        CMP      r4,#0x5c
        BNE      |L9.68|
|L9.66|
        B        |L9.126|
|L9.68|
        CMP      r5,#0xff
        BCC      |L9.80|
        MOVS     r0,#6
|L9.74|
        ADD      sp,sp,#0x14
        POP      {r4-r11,pc}
|L9.80|
        UXTB     r4,r4
        MOVS     r1,#1
        MOV      r0,r4
        BL       ff_convert
        MOV      r4,r0
        CBNZ     r4,|L9.98|
        MOVS     r0,#6
        B        |L9.74|
|L9.98|
        CMP      r4,#0x80
        BGE      |L9.116|
        MOV      r1,r4
        ADR      r0,|L9.536|
        BL       chk_chr
        CBZ      r0,|L9.116|
        MOVS     r0,#6
        B        |L9.74|
|L9.116|
        MOV      r0,r5
        ADDS     r5,r5,#1
        STRH     r4,[r9,r0,LSL #1]
        B        |L9.46|
|L9.126|
        NOP      
        ADD      r1,r11,r6
        LDR      r0,[sp,#0x10]
        STR      r1,[r0,#0]
        CMP      r4,#0x20
        BGE      |L9.144|
        MOVS     r0,#4
        B        |L9.146|
|L9.144|
        MOVS     r0,#0
|L9.146|
        MOV      r7,r0
        B        |L9.168|
|L9.150|
        SUBS     r0,r5,#1
        LDRH     r4,[r9,r0,LSL #1]
        CMP      r4,#0x20
        BEQ      |L9.166|
        CMP      r4,#0x2e
        BEQ      |L9.166|
        B        |L9.172|
|L9.166|
        SUBS     r5,r5,#1
|L9.168|
        CMP      r5,#0
        BNE      |L9.150|
|L9.172|
        NOP      
        CBNZ     r5,|L9.180|
        MOVS     r0,#6
        B        |L9.74|
|L9.180|
        MOVS     r0,#0
        STRH     r0,[r9,r5,LSL #1]
        MOVS     r2,#0xb
        MOVS     r1,#0x20
        LDR      r0,[r10,#0x218]
        BL       mem_set
        MOVS     r6,#0
        B        |L9.204|
|L9.202|
        ADDS     r6,r6,#1
|L9.204|
        LDRH     r0,[r9,r6,LSL #1]
        CMP      r0,#0x20
        BEQ      |L9.202|
        LDRH     r0,[r9,r6,LSL #1]
        CMP      r0,#0x2e
        BEQ      |L9.202|
        CBZ      r6,|L9.226|
        ORR      r7,r7,#3
|L9.226|
        B        |L9.230|
|L9.228|
        SUBS     r5,r5,#1
|L9.230|
        CBZ      r5,|L9.242|
        SUBS     r0,r5,#1
        LDRH     r0,[r9,r0,LSL #1]
        CMP      r0,#0x2e
        BNE      |L9.228|
|L9.242|
        MOV      r8,#0
        STR      r8,[sp,#8]
        MOVS     r0,#8
        STR      r0,[sp,#4]
        NOP      
|L9.256|
        MOV      r0,r6
        ADDS     r6,r6,#1
        LDRH     r4,[r9,r0,LSL #1]
        CBNZ     r4,|L9.268|
        B        |L9.440|
|L9.268|
        CMP      r4,#0x20
        BEQ      |L9.280|
        CMP      r4,#0x2e
        BNE      |L9.286|
        CMP      r6,r5
        BEQ      |L9.286|
|L9.280|
        ORR      r7,r7,#3
        B        |L9.256|
|L9.286|
        LDRD     r1,r0,[sp,#4]
        CMP      r0,r1
        BCS      |L9.298|
        CMP      r6,r5
        BNE      |L9.344|
|L9.298|
        LDR      r0,[sp,#4]
        CMP      r0,#0xb
        BNE      |L9.310|
        ORR      r7,r7,#3
        B        |L9.440|
|L9.310|
        CMP      r6,r5
        BEQ      |L9.318|
        ORR      r7,r7,#3
|L9.318|
        CMP      r6,r5
        BLS      |L9.324|
        B        |L9.440|
|L9.324|
        MOV      r6,r5
        MOVS     r0,#8
        STR      r0,[sp,#8]
        MOVS     r0,#0xb
        STR      r0,[sp,#4]
        LSL      r0,r8,#26
        LSR      r8,r0,#24
        B        |L9.256|
|L9.344|
        CMP      r4,#0x80
        BLT      |L9.372|
        MOVS     r1,#0
        MOV      r0,r4
        BL       ff_convert
        MOV      r4,r0
        CBZ      r4,|L9.368|
        SUB      r0,r4,#0x80
        LDR      r1,|L9.548|
        LDRB     r4,[r1,r0]
|L9.368|
        ORR      r7,r7,#2
|L9.372|
        NOP      
        CBZ      r4,|L9.386|
        MOV      r1,r4
        ADR      r0,|L9.552|
        BL       chk_chr
        CBZ      r0,|L9.394|
|L9.386|
        MOVS     r4,#0x5f
        ORR      r7,r7,#3
        B        |L9.426|
|L9.394|
        CMP      r4,#0x41
        BLT      |L9.408|
        CMP      r4,#0x5a
        BGT      |L9.408|
        ORR      r8,r8,#2
        B        |L9.426|
|L9.408|
        CMP      r4,#0x61
        BLT      |L9.426|
        CMP      r4,#0x7a
        BGT      |L9.426|
        ORR      r8,r8,#1
        SUB      r0,r4,#0x20
        UXTH     r4,r0
|L9.426|
        LDR      r3,[r10,#0x218]
        LDR      r0,[sp,#8]
        ADDS     r1,r0,#1
        STR      r1,[sp,#8]
        STRB     r4,[r3,r0]
        B        |L9.256|
|L9.440|
        NOP      
        LDR      r0,[r10,#0x218]
        LDRB     r0,[r0,#0]
        CMP      r0,#0xe5
        BNE      |L9.460|
        MOVS     r0,#5
        LDR      r1,[r10,#0x218]
        STRB     r0,[r1,#0]
|L9.460|
        LDR      r0,[sp,#4]
        CMP      r0,#8
        BNE      |L9.474|
        LSL      r0,r8,#26
        LSR      r8,r0,#24
|L9.474|
        AND      r0,r8,#0xc
        CMP      r0,#0xc
        BEQ      |L9.490|
        AND      r0,r8,#3
        CMP      r0,#3
        BNE      |L9.494|
|L9.490|
        ORR      r7,r7,#2
|L9.494|
        AND      r0,r7,#2
        CBNZ     r0,|L9.524|
        AND      r0,r8,#3
        CMP      r0,#1
        BNE      |L9.512|
        ORR      r7,r7,#0x10
|L9.512|
        AND      r0,r8,#0xc
        CMP      r0,#4
        BNE      |L9.524|
        ORR      r7,r7,#8
|L9.524|
        LDR      r0,[r10,#0x218]
        STRB     r7,[r0,#0xb]
        MOVS     r0,#0
        B        |L9.74|
        ENDP

        DCW      0x0000
|L9.536|
        DCB      """*:<>?|",127,0
        DCB      0
        DCB      0
        DCB      0
|L9.548|
        DCD      ExCvt
|L9.552|
        DCB      "+,;=[]",0
        DCB      0

        AREA ||i.dec_lock||, CODE, READONLY, ALIGN=2

dec_lock PROC
        PUSH     {r4,r5,lr}
        MOV      r2,r0
        SUBS     r3,r2,#1
        MOV      r2,r3
        CMP      r3,#0xa
        BCS      |L10.68|
        ADD      r3,r2,r2,LSL #1
        LDR      r4,|L10.72|
        ADD      r3,r4,r3,LSL #2
        LDRH     r1,[r3,#0xa]
        CMP      r1,#0x100
        BNE      |L10.32|
        MOVS     r1,#0
|L10.32|
        CBZ      r1,|L10.38|
        SUBS     r3,r1,#1
        UXTH     r1,r3
|L10.38|
        ADD      r3,r2,r2,LSL #1
        LDR      r4,|L10.72|
        ADD      r3,r4,r3,LSL #2
        STRH     r1,[r3,#0xa]
        CBNZ     r1,|L10.64|
        MOVS     r3,#0
        ADD      r4,r2,r2,LSL #1
        LDR      r5,|L10.72|
        STR      r3,[r5,r4,LSL #2]
|L10.64|
        MOVS     r0,#0
        B        |L10.70|
|L10.68|
        MOVS     r0,#2
|L10.70|
        POP      {r4,r5,pc}
        ENDP

|L10.72|
        DCD      Files

        AREA ||i.dir_alloc||, CODE, READONLY, ALIGN=1

dir_alloc PROC
        PUSH     {r4-r8,lr}
        MOV      r4,r0
        MOV      r6,r1
        MOVS     r1,#0
        MOV      r0,r4
        BL       dir_sdi
        MOV      r5,r0
        CBNZ     r5,|L11.88|
        MOVS     r7,#0
        NOP      
|L11.24|
        LDR      r1,[r4,#0x210]
        LDR      r0,[r4,#0x200]
        BL       move_window
        MOV      r5,r0
        CBZ      r5,|L11.42|
        B        |L11.86|
|L11.42|
        LDR      r0,[r4,#0x214]
        LDRB     r0,[r0,#0]
        CMP      r0,#0xe5
        BEQ      |L11.60|
        LDR      r0,[r4,#0x214]
        LDRB     r0,[r0,#0]
        CBNZ     r0,|L11.70|
|L11.60|
        ADDS     r0,r7,#1
        MOV      r7,r0
        CMP      r0,r6
        BNE      |L11.72|
        B        |L11.86|
|L11.70|
        MOVS     r7,#0
|L11.72|
        MOVS     r1,#1
        MOV      r0,r4
        BL       dir_next
        MOV      r5,r0
        CMP      r5,#0
        BEQ      |L11.24|
|L11.86|
        NOP      
|L11.88|
        CMP      r5,#4
        BNE      |L11.94|
        MOVS     r5,#7
|L11.94|
        MOV      r0,r5
        POP      {r4-r8,pc}
        ENDP


        AREA ||i.dir_find||, CODE, READONLY, ALIGN=1

dir_find PROC
        PUSH     {r4-r10,lr}
        MOV      r4,r0
        MOVS     r1,#0
        MOV      r0,r4
        BL       dir_sdi
        MOV      r7,r0
        CBZ      r7,|L12.24|
        MOV      r0,r7
|L12.20|
        POP      {r4-r10,pc}
|L12.24|
        MOV      r9,#0xff
        MOV      r10,r9
        MOV      r0,#0xffff
        STRH     r0,[r4,#0x224]
        NOP      
|L12.40|
        LDR      r1,[r4,#0x210]
        LDR      r0,[r4,#0x200]
        BL       move_window
        MOV      r7,r0
        CBZ      r7,|L12.58|
        B        |L12.252|
|L12.58|
        LDR      r5,[r4,#0x214]
        LDRB     r6,[r5,#0]
        CBNZ     r6,|L12.70|
        MOVS     r7,#4
        B        |L12.252|
|L12.70|
        LDRB     r0,[r5,#0xb]
        AND      r8,r0,#0x3f
        CMP      r6,#0xe5
        BEQ      |L12.92|
        AND      r0,r8,#8
        CBZ      r0,|L12.106|
        CMP      r8,#0xf
        BEQ      |L12.106|
|L12.92|
        MOV      r9,#0xff
        MOV      r0,#0xffff
        STRH     r0,[r4,#0x224]
        B        |L12.238|
|L12.106|
        CMP      r8,#0xf
        BNE      |L12.178|
        LDR      r0,[r4,#0x220]
        CBZ      r0,|L12.224|
        AND      r0,r6,#0x40
        CBZ      r0,|L12.142|
        LDRB     r10,[r5,#0xd]
        BIC      r6,r6,#0x40
        MOV      r9,r6
        LDRH     r0,[r4,#0x206]
        STRH     r0,[r4,#0x224]
|L12.142|
        CMP      r6,r9
        BNE      |L12.170|
        LDRB     r0,[r5,#0xd]
        CMP      r0,r10
        BNE      |L12.170|
        MOV      r1,r5
        LDR      r0,[r4,#0x220]
        BL       cmp_lfn
        CBZ      r0,|L12.170|
        SUB      r0,r9,#1
        B        |L12.172|
|L12.170|
        MOVS     r0,#0xff
|L12.172|
        AND      r9,r0,#0xff
        B        |L12.238|
|L12.178|
        CMP      r9,#0
        BNE      |L12.196|
        MOV      r0,r5
        BL       sum_sfn
        CMP      r0,r10
        BNE      |L12.196|
        B        |L12.252|
|L12.196|
        LDR      r0,[r4,#0x218]
        LDRB     r0,[r0,#0xb]
        AND      r0,r0,#1
        CBNZ     r0,|L12.226|
        MOVS     r2,#0xb
        MOV      r0,r5
        LDR      r1,[r4,#0x218]
        BL       mem_cmp
        CBNZ     r0,|L12.226|
        B        |L12.252|
|L12.224|
        B        |L12.238|
|L12.226|
        MOV      r9,#0xff
        MOV      r0,#0xffff
        STRH     r0,[r4,#0x224]
|L12.238|
        MOVS     r1,#0
        MOV      r0,r4
        BL       dir_next
        MOV      r7,r0
        CMP      r7,#0
        BEQ      |L12.40|
|L12.252|
        NOP      
        MOV      r0,r7
        B        |L12.20|
        ENDP


        AREA ||i.dir_next||, CODE, READONLY, ALIGN=1

dir_next PROC
        PUSH     {r4-r8,lr}
        MOV      r4,r0
        MOV      r8,r1
        LDRH     r0,[r4,#0x206]
        ADDS     r6,r0,#1
        UXTH     r0,r6
        CBZ      r0,|L13.24|
        LDR      r0,[r4,#0x210]
        CBNZ     r0,|L13.30|
|L13.24|
        MOVS     r0,#4
|L13.26|
        POP      {r4-r8,pc}
|L13.30|
        AND      r0,r6,#0xf
        CMP      r0,#0
        BNE      |L13.292|
        LDR      r0,[r4,#0x210]
        ADDS     r0,r0,#1
        STR      r0,[r4,#0x210]
        LDR      r0,[r4,#0x20c]
        CBNZ     r0,|L13.70|
        LDR      r0,[r4,#0x200]
        LDRH     r0,[r0,#0x208]
        CMP      r0,r6
        BHI      |L13.322|
        MOVS     r0,#4
        B        |L13.26|
|L13.70|
        LDR      r0,[r4,#0x200]
        LDRB     r0,[r0,#0x202]
        SUBS     r0,r0,#1
        AND      r0,r0,r6,LSR #4
        CMP      r0,#0
        BNE      |L13.322|
        LDR      r1,[r4,#0x20c]
        LDR      r0,[r4,#0x200]
        BL       get_fat
        MOV      r5,r0
        CMP      r5,#1
        BHI      |L13.110|
        MOVS     r0,#2
        B        |L13.26|
|L13.110|
        ADDS     r0,r5,#1
        CBNZ     r0,|L13.118|
        MOVS     r0,#1
        B        |L13.26|
|L13.118|
        LDR      r0,[r4,#0x200]
        LDR      r0,[r0,#0x214]
        CMP      r0,r5
        BHI      |L13.304|
        CMP      r8,#0
        BNE      |L13.140|
        MOVS     r0,#4
        B        |L13.26|
|L13.140|
        LDR      r1,[r4,#0x20c]
        LDR      r0,[r4,#0x200]
        BL       create_chain
        MOV      r5,r0
        CBNZ     r5,|L13.160|
        MOVS     r0,#7
        B        |L13.26|
|L13.160|
        CMP      r5,#1
        BNE      |L13.168|
        MOVS     r0,#2
        B        |L13.26|
|L13.168|
        ADDS     r0,r5,#1
        CBNZ     r0,|L13.176|
        MOVS     r0,#1
        B        |L13.26|
|L13.176|
        LDR      r0,[r4,#0x200]
        BL       sync_window
        CBZ      r0,|L13.190|
        MOVS     r0,#1
        B        |L13.26|
|L13.190|
        MOV      r2,#0x200
        MOVS     r1,#0
        LDR      r0,[r4,#0x200]
        BL       mem_set
        MOV      r1,r5
        LDR      r0,[r4,#0x200]
        BL       clust2sect
        LDR      r1,[r4,#0x200]
        STR      r0,[r1,#0x22c]
        MOVS     r7,#0
        B        |L13.270|
|L13.226|
        MOVS     r0,#1
        LDR      r1,[r4,#0x200]
        STRB     r0,[r1,#0x204]
        LDR      r0,[r4,#0x200]
        BL       sync_window
        CBZ      r0,|L13.250|
        MOVS     r0,#1
        B        |L13.26|
|L13.250|
        LDR      r0,[r4,#0x200]
        LDR      r0,[r0,#0x22c]
        ADDS     r0,r0,#1
        LDR      r1,[r4,#0x200]
        STR      r0,[r1,#0x22c]
        ADDS     r7,r7,#1
|L13.270|
        LDR      r0,[r4,#0x200]
        LDRB     r0,[r0,#0x202]
        CMP      r0,r7
        BHI      |L13.226|
        LDR      r0,[r4,#0x200]
        LDR      r0,[r0,#0x22c]
        B        |L13.294|
|L13.292|
        B        |L13.322|
|L13.294|
        SUBS     r0,r0,r7
        LDR      r1,[r4,#0x200]
        STR      r0,[r1,#0x22c]
|L13.304|
        STR      r5,[r4,#0x20c]
        MOV      r1,r5
        LDR      r0,[r4,#0x200]
        BL       clust2sect
        STR      r0,[r4,#0x210]
|L13.322|
        STRH     r6,[r4,#0x206]
        AND      r0,r6,#0xf
        LDR      r1,[r4,#0x200]
        ADD      r0,r1,r0,LSL #5
        STR      r0,[r4,#0x214]
        MOVS     r0,#0
        B        |L13.26|
        ENDP


        AREA ||i.dir_register||, CODE, READONLY, ALIGN=1

dir_register PROC
        PUSH     {r1-r11,lr}
        MOV      r4,r0
        LDR      r8,[r4,#0x218]
        LDR      r9,[r4,#0x220]
        MOVS     r2,#0xc
        MOV      r1,r8
        MOV      r0,sp
        BL       mem_cpy
        NOP      
        LDRB     r0,[sp,#0xb]
        AND      r0,r0,#1
        CBZ      r0,|L14.112|
        MOVS     r0,#0
        STRB     r0,[r8,#0xb]
        STR      r0,[r4,#0x220]
        MOVS     r6,#1
        B        |L14.76|
|L14.50|
        MOV      r3,r6
        MOV      r2,r9
        MOV      r1,sp
        MOV      r0,r8
        BL       gen_numname
        MOV      r0,r4
        BL       dir_find
        MOV      r5,r0
        CBZ      r5,|L14.74|
        B        |L14.80|
|L14.74|
        ADDS     r6,r6,#1
|L14.76|
        CMP      r6,#0x64
        BCC      |L14.50|
|L14.80|
        NOP      
        CMP      r6,#0x64
        BNE      |L14.92|
        MOVS     r0,#7
|L14.88|
        POP      {r1-r11,pc}
|L14.92|
        CMP      r5,#4
        BEQ      |L14.100|
        MOV      r0,r5
        B        |L14.88|
|L14.100|
        LDRB     r0,[sp,#0xb]
        STRB     r0,[r8,#0xb]
        STR      r9,[r4,#0x220]
|L14.112|
        LDRB     r0,[sp,#0xb]
        AND      r0,r0,#2
        CBZ      r0,|L14.148|
        MOVS     r6,#0
        B        |L14.128|
|L14.126|
        ADDS     r6,r6,#1
|L14.128|
        LDRH     r0,[r9,r6,LSL #1]
        CMP      r0,#0
        BNE      |L14.126|
        ADD      r0,r6,#0x19
        MOVS     r1,#0xd
        UDIV     r7,r0,r1
        B        |L14.150|
|L14.148|
        MOVS     r7,#1
|L14.150|
        MOV      r1,r7
        MOV      r0,r4
        BL       dir_alloc
        MOV      r5,r0
        CBNZ     r5,|L14.260|
        SUBS     r0,r7,#1
        SUBS     r7,r0,#0
        BEQ      |L14.260|
        LDRH     r0,[r4,#0x206]
        SUBS     r1,r0,r7
        MOV      r0,r4
        BL       dir_sdi
        MOV      r5,r0
        CBNZ     r5,|L14.260|
        LDR      r0,[r4,#0x218]
        BL       sum_sfn
        MOV      r10,r0
        NOP      
|L14.196|
        LDR      r1,[r4,#0x210]
        LDR      r0,[r4,#0x200]
        BL       move_window
        MOV      r5,r0
        CBZ      r5,|L14.214|
        B        |L14.258|
|L14.214|
        UXTB     r2,r7
        MOV      r3,r10
        LDR      r1,[r4,#0x214]
        LDR      r0,[r4,#0x220]
        BL       fit_lfn
        MOVS     r0,#1
        LDR      r1,[r4,#0x200]
        STRB     r0,[r1,#0x204]
        MOVS     r1,#0
        MOV      r0,r4
        BL       dir_next
        MOV      r5,r0
        CBNZ     r5,|L14.258|
        SUBS     r0,r7,#1
        SUBS     r7,r0,#0
        BNE      |L14.196|
|L14.258|
        NOP      
|L14.260|
        CBNZ     r5,|L14.326|
        LDR      r1,[r4,#0x210]
        LDR      r0,[r4,#0x200]
        BL       move_window
        MOV      r5,r0
        CBNZ     r5,|L14.326|
        ADD      r4,r4,#0x200
        MOVS     r2,#0x20
        MOVS     r1,#0
        LDR      r0,[r4,#0x14]
        BL       mem_set
        MOVS     r2,#0xb
        LDRD     r0,r1,[r4,#0x14]
        BL       mem_cpy
        LDR      r0,[r4,#0x18]
        LDRB     r0,[r0,#0xb]
        AND      r0,r0,#0x18
        LDR      r1,[r4,#0x14]
        STRB     r0,[r1,#0xc]
        MOVS     r0,#1
        LDR      r1,[r4,#0]
        SUB      r4,r4,#0x200
        STRB     r0,[r1,#0x204]
|L14.326|
        MOV      r0,r5
        B        |L14.88|
        ENDP


        AREA ||i.dir_sdi||, CODE, READONLY, ALIGN=1

dir_sdi PROC
        PUSH     {r4-r8,lr}
        MOV      r4,r0
        MOV      r6,r1
        STRH     r6,[r4,#0x206]
        LDR      r5,[r4,#0x208]
        CMP      r5,#1
        BEQ      |L15.32|
        LDR      r0,[r4,#0x200]
        LDR      r0,[r0,#0x214]
        CMP      r0,r5
        BHI      |L15.38|
|L15.32|
        MOVS     r0,#2
|L15.34|
        POP      {r4-r8,pc}
|L15.38|
        CBNZ     r5,|L15.60|
        LDR      r0,[r4,#0x200]
        LDRB     r0,[r0,#0x200]
        CMP      r0,#3
        BNE      |L15.60|
        LDR      r0,[r4,#0x200]
        LDR      r5,[r0,#0x224]
|L15.60|
        CBNZ     r5,|L15.88|
        LDR      r0,[r4,#0x200]
        LDRH     r0,[r0,#0x208]
        CMP      r0,r6
        BHI      |L15.78|
        MOVS     r0,#2
        B        |L15.34|
|L15.78|
        LDR      r0,[r4,#0x200]
        LDR      r7,[r0,#0x224]
        B        |L15.162|
|L15.88|
        LDR      r0,[r4,#0x200]
        LDRB     r0,[r0,#0x202]
        LSL      r8,r0,#4
        B        |L15.146|
|L15.102|
        MOV      r1,r5
        LDR      r0,[r4,#0x200]
        BL       get_fat
        MOV      r5,r0
        ADDS     r0,r5,#1
        CBNZ     r0,|L15.122|
        MOVS     r0,#1
        B        |L15.34|
|L15.122|
        CMP      r5,#2
        BCC      |L15.138|
        LDR      r0,[r4,#0x200]
        LDR      r0,[r0,#0x214]
        CMP      r0,r5
        BHI      |L15.142|
|L15.138|
        MOVS     r0,#2
        B        |L15.34|
|L15.142|
        SUB      r6,r6,r8
|L15.146|
        CMP      r6,r8
        BCS      |L15.102|
        MOV      r1,r5
        LDR      r0,[r4,#0x200]
        BL       clust2sect
        MOV      r7,r0
|L15.162|
        STR      r5,[r4,#0x20c]
        CBNZ     r7,|L15.172|
        MOVS     r0,#2
        B        |L15.34|
|L15.172|
        ADD      r0,r7,r6,LSR #4
        STR      r0,[r4,#0x210]
        AND      r0,r6,#0xf
        LDR      r1,[r4,#0x200]
        ADD      r0,r1,r0,LSL #5
        STR      r0,[r4,#0x214]
        MOVS     r0,#0
        B        |L15.34|
        ENDP


        AREA ||i.enq_lock||, CODE, READONLY, ALIGN=2

enq_lock PROC
        MOVS     r1,#0
        B        |L16.6|
|L16.4|
        ADDS     r1,r1,#1
|L16.6|
        CMP      r1,#0xa
        BCS      |L16.24|
        ADD      r0,r1,r1,LSL #1
        LDR      r2,|L16.36|
        LDR      r0,[r2,r0,LSL #2]
        CMP      r0,#0
        BNE      |L16.4|
|L16.24|
        CMP      r1,#0xa
        BEQ      |L16.32|
        MOVS     r0,#1
|L16.30|
        BX       lr
|L16.32|
        MOVS     r0,#0
        B        |L16.30|
        ENDP

|L16.36|
        DCD      Files

        AREA ||i.f_close||, CODE, READONLY, ALIGN=1

f_close PROC
        PUSH     {r4-r6,lr}
        MOV      r5,r0
        MOV      r0,r5
        BL       f_sync
        MOV      r4,r0
        CBNZ     r4,|L17.42|
        MOV      r0,r5
        BL       validate
        MOV      r4,r0
        CBNZ     r4,|L17.42|
        LDR      r0,[r5,#0x228]
        BL       dec_lock
        MOV      r4,r0
        CBNZ     r4,|L17.42|
        MOVS     r0,#0
        STR      r0,[r5,#0x200]
|L17.42|
        MOV      r0,r4
        POP      {r4-r6,pc}
        ENDP


        AREA ||i.f_lseek||, CODE, READONLY, ALIGN=1

f_lseek PROC
        PUSH     {r4-r11,lr}
        SUB      sp,sp,#0x1c
        MOV      r4,r0
        MOV      r5,r1
        MOV      r0,r4
        BL       validate
        STR      r0,[sp,#0x18]
        LDR      r0,[sp,#0x18]
        CBZ      r0,|L18.30|
        LDR      r0,[sp,#0x18]
|L18.24|
        ADD      sp,sp,#0x1c
        POP      {r4-r11,pc}
|L18.30|
        LDRB     r0,[r4,#0x207]
        CBZ      r0,|L18.42|
        LDRB     r0,[r4,#0x207]
        B        |L18.24|
|L18.42|
        LDR      r0,[r4,#0x224]
        CMP      r0,#0
        BEQ      |L18.304|
        ADDS     r0,r5,#1
        CMP      r0,#0
        BNE      |L18.206|
        LDR      r10,[r4,#0x224]
        LDR      r0,[r10],#4
        STR      r0,[sp,#4]
        MOVS     r0,#2
        STR      r0,[sp,#0]
        LDR      r7,[r4,#0x210]
        CBZ      r7,|L18.176|
        NOP      
|L18.78|
        STR      r7,[sp,#8]
        MOVS     r0,#0
        STR      r0,[sp,#0xc]
        LDR      r0,[sp,#0]
        ADDS     r0,r0,#2
        STR      r0,[sp,#0]
        NOP      
|L18.92|
        STR      r7,[sp,#0x10]
        LDR      r0,[sp,#0xc]
        ADDS     r0,r0,#1
        STR      r0,[sp,#0xc]
        MOV      r1,r7
        LDR      r0,[r4,#0x200]
        BL       get_fat
        MOV      r7,r0
        CMP      r7,#1
        BHI      |L18.124|
        MOVS     r0,#2
        STRB     r0,[r4,#0x207]
        B        |L18.24|
|L18.124|
        ADDS     r0,r7,#1
        CBNZ     r0,|L18.136|
        MOVS     r0,#1
        STRB     r0,[r4,#0x207]
        B        |L18.24|
|L18.136|
        LDR      r0,[sp,#0x10]
        ADDS     r0,r0,#1
        CMP      r7,r0
        BEQ      |L18.92|
        LDRD     r0,r1,[sp,#0]
        CMP      r0,r1
        BHI      |L18.164|
        LDR      r0,[sp,#0xc]
        STR      r0,[r10],#4
        LDR      r0,[sp,#8]
        STR      r0,[r10],#4
|L18.164|
        LDR      r0,[r4,#0x200]
        LDR      r0,[r0,#0x214]
        CMP      r0,r7
        BHI      |L18.78|
|L18.176|
        LDR      r0,[sp,#0]
        LDR      r1,[r4,#0x224]
        STR      r0,[r1,#0]
        LDRD     r0,r1,[sp,#0]
        CMP      r0,r1
        BHI      |L18.200|
        MOVS     r0,#0
        STR      r0,[r10,#0]
|L18.198|
        B        |L18.830|
|L18.200|
        MOVS     r0,#0x11
        STR      r0,[sp,#0x18]
        B        |L18.830|
|L18.206|
        LDR      r0,[r4,#0x20c]
        CMP      r0,r5
        BCS      |L18.218|
        LDR      r5,[r4,#0x20c]
|L18.218|
        STR      r5,[r4,#0x208]
        CMP      r5,#0
        BEQ      |L18.198|
        SUBS     r1,r5,#1
        MOV      r0,r4
        BL       clmt_clust
        STR      r0,[r4,#0x214]
        LDR      r1,[r4,#0x214]
        LDR      r0,[r4,#0x200]
        BL       clust2sect
        MOV      r9,r0
        CMP      r9,#0
        BNE      |L18.266|
        MOVS     r0,#2
        STRB     r0,[r4,#0x207]
        B        |L18.24|
|L18.266|
        LDR      r0,[r4,#0x200]
        LDRB     r0,[r0,#0x202]
        SUBS     r0,r0,#1
        SUBS     r1,r5,#1
        AND      r0,r0,r1,LSR #9
        ADD      r9,r9,r0
        LDRH     r0,[r4,#0x208]
        UBFX     r0,r0,#0,#9
        CMP      r0,#0
        BEQ      |L18.198|
        LDR      r0,[r4,#0x218]
        CMP      r0,r9
        B        |L18.306|
|L18.304|
        B        |L18.394|
|L18.306|
        BEQ      |L18.198|
        LDRB     r0,[r4,#0x206]
        AND      r0,r0,#0x40
        CBZ      r0,|L18.360|
        LDR      r1,[r4,#0x200]
        LDRB     r0,[r1,#0x201]
        MOVS     r3,#1
        MOV      r1,r4
        LDR      r2,[r4,#0x218]
        BL       disk_write
        CBZ      r0,|L18.348|
        MOVS     r0,#1
        STRB     r0,[r4,#0x207]
        B        |L18.24|
|L18.348|
        LDRB     r0,[r4,#0x206]
        BIC      r0,r0,#0x40
        STRB     r0,[r4,#0x206]
|L18.360|
        LDR      r1,[r4,#0x200]
        LDRB     r0,[r1,#0x201]
        MOVS     r3,#1
        MOV      r2,r9
        MOV      r1,r4
        BL       disk_read
        CBZ      r0,|L18.388|
        MOVS     r0,#1
        STRB     r0,[r4,#0x207]
        B        |L18.24|
|L18.388|
        STR      r9,[r4,#0x218]
        B        |L18.830|
|L18.394|
        LDR      r0,[r4,#0x20c]
        CMP      r0,r5
        BCS      |L18.416|
        LDRB     r0,[r4,#0x206]
        AND      r0,r0,#2
        CBNZ     r0,|L18.416|
        LDR      r5,[r4,#0x20c]
|L18.416|
        LDR      r0,[r4,#0x208]
        STR      r0,[sp,#0x14]
        MOV      r11,#0
        STR      r11,[r4,#0x208]
        CMP      r5,#0
        BEQ      |L18.672|
        LDR      r0,[r4,#0x200]
        LDRB     r0,[r0,#0x202]
        LSL      r8,r0,#9
        LDR      r0,[sp,#0x14]
        CBZ      r0,|L18.494|
        SUBS     r0,r5,#1
        UDIV     r1,r0,r8
        LDR      r0,[sp,#0x14]
        SUBS     r0,r0,#1
        UDIV     r0,r0,r8
        CMP      r1,r0
        BCC      |L18.494|
        LDR      r0,[sp,#0x14]
        SUBS     r0,r0,#1
        SUB      r1,r8,#1
        BICS     r0,r0,r1
        STR      r0,[r4,#0x208]
        LDR      r0,[r4,#0x208]
        SUBS     r5,r5,r0
        LDR      r6,[r4,#0x214]
        B        |L18.544|
|L18.494|
        LDR      r6,[r4,#0x210]
        CBNZ     r6,|L18.540|
        MOVS     r1,#0
        LDR      r0,[r4,#0x200]
        BL       create_chain
        MOV      r6,r0
        CMP      r6,#1
        BNE      |L18.524|
        MOVS     r0,#2
        STRB     r0,[r4,#0x207]
        B        |L18.24|
|L18.524|
        ADDS     r0,r6,#1
        CBNZ     r0,|L18.536|
        MOVS     r0,#1
        STRB     r0,[r4,#0x207]
        B        |L18.24|
|L18.536|
        STR      r6,[r4,#0x210]
|L18.540|
        STR      r6,[r4,#0x214]
|L18.544|
        CBZ      r6,|L18.672|
        B        |L18.642|
|L18.548|
        LDRB     r0,[r4,#0x206]
        AND      r0,r0,#2
        CBZ      r0,|L18.576|
        MOV      r1,r6
        LDR      r0,[r4,#0x200]
        BL       create_chain
        MOV      r6,r0
        CBNZ     r6,|L18.588|
        MOV      r5,r8
        B        |L18.646|
|L18.576|
        MOV      r1,r6
        LDR      r0,[r4,#0x200]
        BL       get_fat
        MOV      r6,r0
|L18.588|
        ADDS     r0,r6,#1
        CBNZ     r0,|L18.600|
        MOVS     r0,#1
        STRB     r0,[r4,#0x207]
        B        |L18.24|
|L18.600|
        CMP      r6,#1
        BLS      |L18.616|
        LDR      r0,[r4,#0x200]
        LDR      r0,[r0,#0x214]
        CMP      r0,r6
        BHI      |L18.624|
|L18.616|
        MOVS     r0,#2
        STRB     r0,[r4,#0x207]
        B        |L18.24|
|L18.624|
        STR      r6,[r4,#0x214]
        LDR      r0,[r4,#0x208]
        ADD      r0,r0,r8
        STR      r0,[r4,#0x208]
        SUB      r5,r5,r8
|L18.642|
        CMP      r5,r8
        BHI      |L18.548|
|L18.646|
        NOP      
        LDR      r0,[r4,#0x208]
        ADD      r0,r0,r5
        STR      r0,[r4,#0x208]
        UBFX     r0,r5,#0,#9
        CBZ      r0,|L18.672|
        MOV      r1,r6
        LDR      r0,[r4,#0x200]
        B        |L18.674|
|L18.672|
        B        |L18.698|
|L18.674|
        BL       clust2sect
        MOV      r11,r0
        CMP      r11,#0
        BNE      |L18.694|
        MOVS     r0,#2
        STRB     r0,[r4,#0x207]
        B        |L18.24|
|L18.694|
        ADD      r11,r11,r5,LSR #9
|L18.698|
        LDRH     r0,[r4,#0x208]
        UBFX     r0,r0,#0,#9
        CBZ      r0,|L18.800|
        LDR      r0,[r4,#0x218]
        CMP      r0,r11
        BEQ      |L18.800|
        LDRB     r0,[r4,#0x206]
        AND      r0,r0,#0x40
        CBZ      r0,|L18.768|
        LDR      r1,[r4,#0x200]
        LDRB     r0,[r1,#0x201]
        MOVS     r3,#1
        MOV      r1,r4
        LDR      r2,[r4,#0x218]
        BL       disk_write
        CBZ      r0,|L18.756|
        MOVS     r0,#1
        STRB     r0,[r4,#0x207]
        B        |L18.24|
|L18.756|
        LDRB     r0,[r4,#0x206]
        BIC      r0,r0,#0x40
        STRB     r0,[r4,#0x206]
|L18.768|
        LDR      r1,[r4,#0x200]
        LDRB     r0,[r1,#0x201]
        MOVS     r3,#1
        MOV      r2,r11
        MOV      r1,r4
        BL       disk_read
        CBZ      r0,|L18.796|
        MOVS     r0,#1
        STRB     r0,[r4,#0x207]
        B        |L18.24|
|L18.796|
        STR      r11,[r4,#0x218]
|L18.800|
        ADD      r0,r4,#0x208
        LDM      r0,{r0,r1}
        CMP      r0,r1
        BLS      |L18.830|
        LDR      r0,[r4,#0x208]
        STR      r0,[r4,#0x20c]
        LDRB     r0,[r4,#0x206]
        ORR      r0,r0,#0x20
        STRB     r0,[r4,#0x206]
|L18.830|
        LDR      r0,[sp,#0x18]
        B        |L18.24|
        ENDP


        AREA ||i.f_mount||, CODE, READONLY, ALIGN=2

f_mount PROC
        PUSH     {r0-r2,r4-r7,lr}
        SUB      sp,sp,#8
        MOV      r6,r2
        LDR      r0,[sp,#0xc]
        STR      r0,[sp,#4]
        ADD      r0,sp,#4
        BL       get_ldnumber
        MOV      r5,r0
        CMP      r5,#0
        BGE      |L19.28|
        MOVS     r0,#0xb
|L19.24|
        ADD      sp,sp,#0x14
        POP      {r4-r7,pc}
|L19.28|
        LDR      r0,|L19.96|
        LDR      r4,[r0,r5,LSL #2]
        CBZ      r4,|L19.48|
        MOV      r0,r4
        BL       clear_lock
        MOVS     r0,#0
        STRB     r0,[r4,#0x200]
|L19.48|
        LDR      r0,[sp,#8]
        CBZ      r0,|L19.60|
        MOVS     r0,#0
        LDR      r1,[sp,#8]
        STRB     r0,[r1,#0x200]
|L19.60|
        LDR      r1,|L19.96|
        LDR      r0,[sp,#8]
        STR      r0,[r1,r5,LSL #2]
        LDR      r0,[sp,#8]
        CBZ      r0,|L19.76|
        CMP      r6,#1
        BEQ      |L19.80|
|L19.76|
        MOVS     r0,#0
        B        |L19.24|
|L19.80|
        MOVS     r2,#0
        ADD      r1,sp,#0xc
        ADD      r0,sp,#8
        BL       find_volume
        MOV      r7,r0
        MOV      r0,r7
        B        |L19.24|
        ENDP

|L19.96|
        DCD      FatFs

        AREA ||i.f_open||, CODE, READONLY, ALIGN=2

f_open PROC
        PUSH     {r0-r2,r4-r9,lr}
        SUB      sp,sp,#0x238
        MOV      r5,r0
        MOV      r6,r2
        CBNZ     r5,|L20.24|
        MOVS     r0,#9
|L20.16|
        ADD      sp,sp,#0x244
        POP      {r4-r9,pc}
|L20.24|
        MOVS     r0,#0
        STR      r0,[r5,#0x200]
        AND      r6,r6,#0x1f
        BIC      r2,r6,#1
        ADD      r1,sp,#0x23c
        ADD      r0,sp,#0x210
        BL       find_volume
        MOV      r7,r0
        CMP      r7,#0
        BNE      |L20.288|
        ADD      r0,sp,#4
        STR      r0,[sp,#0x228]
        LDR      r0,|L20.452|
        STR      r0,[sp,#0x230]
        ADD      r0,sp,#0x10
        LDR      r1,[sp,#0x23c]
        BL       follow_path
        MOV      r7,r0
        LDR      r4,[sp,#0x224]
        CBNZ     r7,|L20.102|
        CBNZ     r4,|L20.80|
        MOVS     r7,#6
        B        |L20.102|
|L20.80|
        BIC      r0,r6,#1
        CBZ      r0,|L20.90|
        MOVS     r0,#1
        B        |L20.92|
|L20.90|
        MOVS     r0,#0
|L20.92|
        MOV      r1,r0
        ADD      r0,sp,#0x10
        BL       chk_lock
        MOV      r7,r0
|L20.102|
        AND      r0,r6,#0x1c
        CMP      r0,#0
        BEQ      |L20.290|
        CBZ      r7,|L20.142|
        CMP      r7,#4
        BNE      |L20.134|
        BL       enq_lock
        CBZ      r0,|L20.130|
        ADD      r0,sp,#0x10
        BL       dir_register
        B        |L20.132|
|L20.130|
        MOVS     r0,#0x12
|L20.132|
        MOV      r7,r0
|L20.134|
        ORR      r6,r6,#8
        LDR      r4,[sp,#0x224]
        B        |L20.162|
|L20.142|
        LDRB     r0,[r4,#0xb]
        AND      r0,r0,#0x11
        CBZ      r0,|L20.154|
        MOVS     r7,#7
        B        |L20.162|
|L20.154|
        AND      r0,r6,#4
        CBZ      r0,|L20.162|
        MOVS     r7,#8
|L20.162|
        CMP      r7,#0
        BNE      |L20.320|
        AND      r0,r6,#8
        CMP      r0,#0
        BEQ      |L20.320|
        BL       get_fattime
        MOV      r8,r0
        STRB     r8,[r4,#0xe]
        LSR      r1,r8,#8
        STRB     r1,[r4,#0xf]
        LSR      r1,r8,#16
        STRB     r1,[r4,#0x10]
        LSR      r1,r8,#24
        STRB     r1,[r4,#0x11]
        MOVS     r0,#0
        STRB     r0,[r4,#0xb]
        STRB     r0,[r4,#0x1c]
        MOVS     r1,#0
        STRB     r1,[r4,#0x1d]
        STRB     r1,[r4,#0x1e]
        STRB     r1,[r4,#0x1f]
        MOV      r1,r4
        LDR      r0,[sp,#0x210]
        BL       ld_clust
        MOV      r9,r0
        MOVS     r1,#0
        MOV      r0,r4
        BL       st_clust
        MOVS     r0,#1
        LDR      r1,[sp,#0x210]
        STRB     r0,[r1,#0x204]
        CMP      r9,#0
        BEQ      |L20.320|
        LDR      r0,[sp,#0x210]
        LDR      r8,[r0,#0x22c]
        MOV      r1,r9
        LDR      r0,[sp,#0x210]
        BL       remove_chain
        MOV      r7,r0
        CBNZ     r7,|L20.320|
        SUB      r0,r9,#1
        LDR      r1,[sp,#0x210]
        STR      r0,[r1,#0x20c]
        MOV      r1,r8
        LDR      r0,[sp,#0x210]
        BL       move_window
        MOV      r7,r0
        B        |L20.320|
|L20.288|
        B        |L20.446|
|L20.290|
        CBNZ     r7,|L20.320|
        LDRB     r0,[r4,#0xb]
        AND      r0,r0,#0x10
        CBZ      r0,|L20.304|
        MOVS     r7,#4
        B        |L20.320|
|L20.304|
        AND      r0,r6,#2
        CBZ      r0,|L20.320|
        LDRB     r0,[r4,#0xb]
        AND      r0,r0,#1
        CBZ      r0,|L20.320|
        MOVS     r7,#7
|L20.320|
        CBNZ     r7,|L20.378|
        AND      r0,r6,#8
        CBZ      r0,|L20.332|
        ORR      r6,r6,#0x20
|L20.332|
        LDR      r0,[sp,#0x210]
        LDR      r0,[r0,#0x22c]
        STR      r0,[r5,#0x21c]
        STR      r4,[r5,#0x220]
        BIC      r0,r6,#1
        CBZ      r0,|L20.356|
        MOVS     r0,#1
        B        |L20.358|
|L20.356|
        MOVS     r0,#0
|L20.358|
        MOV      r1,r0
        ADD      r0,sp,#0x10
        BL       inc_lock
        STR      r0,[r5,#0x228]
        LDR      r0,[r5,#0x228]
        CBNZ     r0,|L20.378|
        MOVS     r7,#2
|L20.378|
        CBNZ     r7,|L20.446|
        ADD      r5,r5,#0x200
        STRB     r6,[r5,#6]
        MOVS     r0,#0
        STRB     r0,[r5,#7]
        MOV      r1,r4
        LDR      r0,[sp,#0x210]
        BL       ld_clust
        STR      r0,[r5,#0x10]
        LDRB     r0,[r4,#0x1f]
        LSLS     r1,r0,#24
        LDRB     r0,[r4,#0x1e]
        ORR      r1,r1,r0,LSL #16
        LDRB     r0,[r4,#0x1d]
        ORR      r0,r1,r0,LSL #8
        LDRB     r1,[r4,#0x1c]
        ORRS     r0,r0,r1
        STR      r0,[r5,#0xc]
        MOVS     r0,#0
        STR      r0,[r5,#8]
        STR      r0,[r5,#0x18]
        STR      r0,[r5,#0x24]
        LDR      r0,[sp,#0x210]
        STR      r0,[r5,#0]
        LDR      r0,[r5,#0]
        LDRH     r0,[r0,#0x206]
        STRH     r0,[r5,#4]
        SUB      r5,r5,#0x200
|L20.446|
        MOV      r0,r7
        B        |L20.16|
        ENDP

        DCW      0x0000
|L20.452|
        DCD      LfnBuf

        AREA ||i.f_read||, CODE, READONLY, ALIGN=1

f_read PROC
        PUSH     {r0-r11,lr}
        SUB      sp,sp,#0xc
        MOV      r4,r0
        MOV      r5,r2
        MOV      r10,r3
        LDR      r11,[sp,#0x10]
        MOVS     r0,#0
        STR      r0,[r10,#0]
        MOV      r0,r4
        BL       validate
        STR      r0,[sp,#8]
        LDR      r0,[sp,#8]
        CBZ      r0,|L21.42|
        LDR      r0,[sp,#8]
|L21.36|
        ADD      sp,sp,#0x1c
        POP      {r4-r11,pc}
|L21.42|
        LDRB     r0,[r4,#0x207]
        CBZ      r0,|L21.54|
        LDRB     r0,[r4,#0x207]
        B        |L21.36|
|L21.54|
        LDRB     r0,[r4,#0x206]
        AND      r0,r0,#1
        CBNZ     r0,|L21.68|
        MOVS     r0,#7
        B        |L21.36|
|L21.68|
        LDR      r1,[r4,#0x208]
        LDR      r0,[r4,#0x20c]
        SUBS     r0,r0,r1
        STR      r0,[sp,#0]
        LDR      r0,[sp,#0]
        CMP      r5,r0
        BLS      |L21.88|
        LDR      r5,[sp,#0]
|L21.88|
        B        |L21.506|
|L21.90|
        LDRH     r0,[r4,#0x208]
        UBFX     r0,r0,#0,#9
        CMP      r0,#0
        BNE      |L21.350|
        LDR      r0,[r4,#0x200]
        LDRB     r0,[r0,#0x202]
        SUBS     r0,r0,#1
        LDR      r1,[r4,#0x208]
        AND      r0,r0,r1,LSR #9
        AND      r9,r0,#0xff
        CMP      r9,#0
        BNE      |L21.212|
        LDR      r0,[r4,#0x208]
        CBNZ     r0,|L21.144|
        LDR      r0,[r4,#0x210]
        STR      r0,[sp,#4]
        B        |L21.178|
|L21.144|
        LDR      r0,[r4,#0x224]
        CBZ      r0,|L21.164|
        MOV      r0,r4
        LDR      r1,[r4,#0x208]
        BL       clmt_clust
        STR      r0,[sp,#4]
        B        |L21.178|
|L21.164|
        LDR      r1,[r4,#0x214]
        LDR      r0,[r4,#0x200]
        BL       get_fat
        STR      r0,[sp,#4]
|L21.178|
        LDR      r0,[sp,#4]
        CMP      r0,#2
        BCS      |L21.192|
        MOVS     r0,#2
        STRB     r0,[r4,#0x207]
        B        |L21.36|
|L21.192|
        LDR      r0,[sp,#4]
        ADDS     r0,r0,#1
        CBNZ     r0,|L21.206|
        MOVS     r0,#1
        STRB     r0,[r4,#0x207]
        B        |L21.36|
|L21.206|
        LDR      r0,[sp,#4]
        STR      r0,[r4,#0x214]
|L21.212|
        LDR      r1,[r4,#0x214]
        LDR      r0,[r4,#0x200]
        BL       clust2sect
        MOV      r6,r0
        CBNZ     r6,|L21.236|
        MOVS     r0,#2
        STRB     r0,[r4,#0x207]
        B        |L21.36|
|L21.236|
        ADD      r6,r6,r9
        LSR      r8,r5,#9
        CMP      r8,#0
        BEQ      |L21.352|
        ADD      r0,r9,r8
        LDR      r1,[r4,#0x200]
        LDRB     r1,[r1,#0x202]
        CMP      r0,r1
        BLS      |L21.276|
        LDR      r0,[r4,#0x200]
        LDRB     r0,[r0,#0x202]
        SUB      r8,r0,r9
|L21.276|
        LDR      r1,[r4,#0x200]
        LDRB     r0,[r1,#0x201]
        MOV      r3,r8
        MOV      r2,r6
        MOV      r1,r11
        BL       disk_read
        CBZ      r0,|L21.304|
        MOVS     r0,#1
        STRB     r0,[r4,#0x207]
        B        |L21.36|
|L21.304|
        LDRB     r0,[r4,#0x206]
        AND      r0,r0,#0x40
        CBZ      r0,|L21.344|
        LDR      r0,[r4,#0x218]
        SUBS     r0,r0,r6
        CMP      r0,r8
        BCS      |L21.344|
        LDR      r1,[r4,#0x218]
        SUBS     r1,r1,r6
        ADD      r0,r11,r1,LSL #9
        MOV      r2,#0x200
        MOV      r1,r4
        BL       mem_cpy
|L21.344|
        LSL      r7,r8,#9
        B        |L21.482|
|L21.350|
        B        |L21.444|
|L21.352|
        LDR      r0,[r4,#0x218]
        CMP      r0,r6
        BEQ      |L21.440|
        LDRB     r0,[r4,#0x206]
        AND      r0,r0,#0x40
        CBZ      r0,|L21.412|
        LDR      r1,[r4,#0x200]
        LDRB     r0,[r1,#0x201]
        MOVS     r3,#1
        MOV      r1,r4
        LDR      r2,[r4,#0x218]
        BL       disk_write
        CBZ      r0,|L21.400|
        MOVS     r0,#1
        STRB     r0,[r4,#0x207]
        B        |L21.36|
|L21.400|
        LDRB     r0,[r4,#0x206]
        BIC      r0,r0,#0x40
        STRB     r0,[r4,#0x206]
|L21.412|
        LDR      r1,[r4,#0x200]
        LDRB     r0,[r1,#0x201]
        MOVS     r3,#1
        MOV      r2,r6
        MOV      r1,r4
        BL       disk_read
        CBZ      r0,|L21.440|
        MOVS     r0,#1
        STRB     r0,[r4,#0x207]
        B        |L21.36|
|L21.440|
        STR      r6,[r4,#0x218]
|L21.444|
        LDRH     r0,[r4,#0x208]
        UBFX     r0,r0,#0,#9
        RSB      r7,r0,#0x200
        CMP      r7,r5
        BLS      |L21.462|
        MOV      r7,r5
|L21.462|
        LDRH     r0,[r4,#0x208]
        UBFX     r0,r0,#0,#9
        ADDS     r1,r0,r4
        MOV      r2,r7
        MOV      r0,r11
        BL       mem_cpy
        NOP      
|L21.482|
        ADD      r11,r11,r7
        LDR      r0,[r4,#0x208]
        ADD      r0,r0,r7
        STR      r0,[r4,#0x208]
        LDR      r0,[r10,#0]
        ADD      r0,r0,r7
        STR      r0,[r10,#0]
        SUBS     r5,r5,r7
|L21.506|
        CMP      r5,#0
        BNE      |L21.90|
        MOVS     r0,#0
        B        |L21.36|
        ENDP


        AREA ||i.f_sync||, CODE, READONLY, ALIGN=1

f_sync PROC
        PUSH     {r4-r8,lr}
        MOV      r4,r0
        MOV      r0,r4
        BL       validate
        MOV      r7,r0
        CMP      r7,#0
        BNE      |L22.198|
        LDRB     r0,[r4,#0x206]
        AND      r0,r0,#0x20
        CMP      r0,#0
        BEQ      |L22.198|
        LDRB     r0,[r4,#0x206]
        AND      r0,r0,#0x40
        CBZ      r0,|L22.80|
        LDR      r1,[r4,#0x200]
        LDRB     r0,[r1,#0x201]
        MOVS     r3,#1
        MOV      r1,r4
        LDR      r2,[r4,#0x218]
        BL       disk_write
        CBZ      r0,|L22.68|
        MOVS     r0,#1
|L22.64|
        POP      {r4-r8,pc}
|L22.68|
        LDRB     r0,[r4,#0x206]
        BIC      r0,r0,#0x40
        STRB     r0,[r4,#0x206]
|L22.80|
        LDR      r1,[r4,#0x21c]
        LDR      r0,[r4,#0x200]
        BL       move_window
        MOV      r7,r0
        CMP      r7,#0
        BNE      |L22.198|
        ADD      r4,r4,#0x200
        LDR      r5,[r4,#0x20]
        LDRB     r0,[r5,#0xb]
        ORR      r0,r0,#0x20
        STRB     r0,[r5,#0xb]
        LDRB     r0,[r4,#0xc]
        STRB     r0,[r5,#0x1c]
        LDRH     r0,[r4,#0xc]
        LSRS     r1,r0,#8
        STRB     r1,[r5,#0x1d]
        LDR      r0,[r4,#0xc]
        LSRS     r1,r0,#16
        STRB     r1,[r5,#0x1e]
        LDR      r0,[r4,#0xc]
        LSRS     r1,r0,#24
        STRB     r1,[r5,#0x1f]
        MOV      r0,r5
        LDR      r1,[r4,#0x10]
        BL       st_clust
        BL       get_fattime
        MOV      r6,r0
        STRB     r6,[r5,#0x16]
        LSRS     r1,r6,#8
        STRB     r1,[r5,#0x17]
        LSRS     r1,r6,#16
        STRB     r1,[r5,#0x18]
        LSRS     r1,r6,#24
        STRB     r1,[r5,#0x19]
        MOVS     r0,#0
        STRB     r0,[r5,#0x12]
        MOVS     r1,#0
        STRB     r1,[r5,#0x13]
        LDRB     r0,[r4,#6]
        BIC      r0,r0,#0x20
        STRB     r0,[r4,#6]
        MOVS     r0,#1
        LDR      r1,[r4,#0]
        STRB     r0,[r1,#0x204]
        LDR      r0,[r4,#0]
        SUB      r4,r4,#0x200
        BL       sync_fs
        MOV      r7,r0
|L22.198|
        MOV      r0,r7
        B        |L22.64|
        ENDP


        AREA ||i.f_write||, CODE, READONLY, ALIGN=1

f_write PROC
        PUSH     {r0-r11,lr}
        SUB      sp,sp,#0xc
        MOV      r4,r0
        MOV      r5,r2
        MOV      r11,r3
        LDR      r0,[sp,#0x10]
        STR      r0,[sp,#4]
        MOVS     r0,#0
        STR      r0,[r11,#0]
        MOV      r0,r4
        BL       validate
        STR      r0,[sp,#8]
        LDR      r0,[sp,#8]
        CBZ      r0,|L23.42|
        LDR      r0,[sp,#8]
|L23.36|
        ADD      sp,sp,#0x1c
        POP      {r4-r11,pc}
|L23.42|
        LDRB     r0,[r4,#0x207]
        CBZ      r0,|L23.54|
        LDRB     r0,[r4,#0x207]
        B        |L23.36|
|L23.54|
        LDRB     r0,[r4,#0x206]
        AND      r0,r0,#2
        CBNZ     r0,|L23.68|
        MOVS     r0,#7
        B        |L23.36|
|L23.68|
        LDR      r0,[r4,#0x208]
        ADD      r0,r0,r5
        LDR      r1,[r4,#0x208]
        CMP      r0,r1
        BCS      |L23.84|
        MOVS     r5,#0
|L23.84|
        B        |L23.556|
|L23.86|
        LDRH     r0,[r4,#0x208]
        UBFX     r0,r0,#0,#9
        CMP      r0,#0
        BNE      |L23.350|
        LDR      r0,[r4,#0x200]
        LDRB     r0,[r0,#0x202]
        SUBS     r0,r0,#1
        LDR      r1,[r4,#0x208]
        AND      r0,r0,r1,LSR #9
        AND      r10,r0,#0xff
        CMP      r10,#0
        BNE      |L23.228|
        LDR      r0,[r4,#0x208]
        CBNZ     r0,|L23.152|
        LDR      r7,[r4,#0x210]
        CBNZ     r7,|L23.186|
        MOVS     r1,#0
        LDR      r0,[r4,#0x200]
        BL       create_chain
        MOV      r7,r0
        B        |L23.186|
|L23.152|
        LDR      r0,[r4,#0x224]
        CBZ      r0,|L23.172|
        MOV      r0,r4
        LDR      r1,[r4,#0x208]
        BL       clmt_clust
        MOV      r7,r0
        B        |L23.186|
|L23.172|
        LDR      r1,[r4,#0x214]
        LDR      r0,[r4,#0x200]
        BL       create_chain
        MOV      r7,r0
|L23.186|
        CBNZ     r7,|L23.190|
        B        |L23.562|
|L23.190|
        CMP      r7,#1
        BNE      |L23.202|
        MOVS     r0,#2
        STRB     r0,[r4,#0x207]
        B        |L23.36|
|L23.202|
        ADDS     r0,r7,#1
        CBNZ     r0,|L23.214|
        MOVS     r0,#1
        STRB     r0,[r4,#0x207]
        B        |L23.36|
|L23.214|
        STR      r7,[r4,#0x214]
        LDR      r0,[r4,#0x210]
        CBNZ     r0,|L23.228|
        STR      r7,[r4,#0x210]
|L23.228|
        LDRB     r0,[r4,#0x206]
        AND      r0,r0,#0x40
        CBZ      r0,|L23.280|
        LDR      r1,[r4,#0x200]
        LDRB     r0,[r1,#0x201]
        MOVS     r3,#1
        MOV      r1,r4
        LDR      r2,[r4,#0x218]
        BL       disk_write
        CBZ      r0,|L23.268|
        MOVS     r0,#1
        STRB     r0,[r4,#0x207]
        B        |L23.36|
|L23.268|
        LDRB     r0,[r4,#0x206]
        BIC      r0,r0,#0x40
        STRB     r0,[r4,#0x206]
|L23.280|
        LDR      r1,[r4,#0x214]
        LDR      r0,[r4,#0x200]
        BL       clust2sect
        MOV      r6,r0
        CBNZ     r6,|L23.304|
        MOVS     r0,#2
        STRB     r0,[r4,#0x207]
        B        |L23.36|
|L23.304|
        ADD      r6,r6,r10
        LSR      r9,r5,#9
        CMP      r9,#0
        BEQ      |L23.426|
        ADD      r0,r10,r9
        LDR      r1,[r4,#0x200]
        LDRB     r1,[r1,#0x202]
        CMP      r0,r1
        BLS      |L23.344|
        LDR      r0,[r4,#0x200]
        LDRB     r0,[r0,#0x202]
        SUB      r9,r0,r10
|L23.344|
        LDR      r1,[r4,#0x200]
        B        |L23.352|
|L23.350|
        B        |L23.476|
|L23.352|
        LDRB     r0,[r1,#0x201]
        MOV      r3,r9
        MOV      r2,r6
        LDR      r1,[sp,#4]
        BL       disk_write
        CBZ      r0,|L23.376|
        MOVS     r0,#1
        STRB     r0,[r4,#0x207]
        B        |L23.36|
|L23.376|
        LDR      r0,[r4,#0x218]
        SUBS     r0,r0,r6
        CMP      r0,r9
        BCS      |L23.420|
        LDR      r0,[r4,#0x218]
        SUBS     r0,r0,r6
        LDR      r2,[sp,#4]
        ADD      r1,r2,r0,LSL #9
        MOV      r2,#0x200
        MOV      r0,r4
        BL       mem_cpy
        LDRB     r0,[r4,#0x206]
        BIC      r0,r0,#0x40
        STRB     r0,[r4,#0x206]
|L23.420|
        LSL      r8,r9,#9
        B        |L23.526|
|L23.426|
        LDR      r0,[r4,#0x218]
        CMP      r0,r6
        BEQ      |L23.472|
        ADD      r0,r4,#0x208
        LDM      r0,{r0,r1}
        CMP      r0,r1
        BCS      |L23.472|
        LDR      r1,[r4,#0x200]
        LDRB     r0,[r1,#0x201]
        MOVS     r3,#1
        MOV      r2,r6
        MOV      r1,r4
        BL       disk_read
        CBZ      r0,|L23.472|
        MOVS     r0,#1
        STRB     r0,[r4,#0x207]
        B        |L23.36|
|L23.472|
        STR      r6,[r4,#0x218]
|L23.476|
        LDRH     r0,[r4,#0x208]
        UBFX     r0,r0,#0,#9
        RSB      r8,r0,#0x200
        CMP      r8,r5
        BLS      |L23.494|
        MOV      r8,r5
|L23.494|
        LDRH     r1,[r4,#0x208]
        UBFX     r1,r1,#0,#9
        ADDS     r0,r1,r4
        MOV      r2,r8
        LDR      r1,[sp,#4]
        BL       mem_cpy
        LDRB     r0,[r4,#0x206]
        ORR      r0,r0,#0x40
        STRB     r0,[r4,#0x206]
        NOP      
|L23.526|
        LDR      r0,[sp,#4]
        ADD      r0,r0,r8
        STR      r0,[sp,#4]
        LDR      r0,[r4,#0x208]
        ADD      r0,r0,r8
        STR      r0,[r4,#0x208]
        LDR      r0,[r11,#0]
        ADD      r0,r0,r8
        STR      r0,[r11,#0]
        SUB      r5,r5,r8
|L23.556|
        CMP      r5,#0
        BNE      |L23.86|
|L23.562|
        NOP      
        ADD      r0,r4,#0x208
        LDM      r0,{r0,r1}
        CMP      r0,r1
        BLS      |L23.582|
        LDR      r0,[r4,#0x208]
        STR      r0,[r4,#0x20c]
|L23.582|
        LDRB     r0,[r4,#0x206]
        ORR      r0,r0,#0x20
        STRB     r0,[r4,#0x206]
        MOVS     r0,#0
        B        |L23.36|
        ENDP


        AREA ||i.find_volume||, CODE, READONLY, ALIGN=2

find_volume PROC
        PUSH     {r0-r2,r4-r11,lr}
        SUB      sp,sp,#0x28
        MOVS     r1,#0
        LDR      r0,[sp,#0x28]
        STR      r1,[r0,#0]
        LDR      r0,[sp,#0x2c]
        BL       get_ldnumber
        STR      r0,[sp,#0x24]
        LDR      r0,[sp,#0x24]
        CMP      r0,#0
        BGE      |L24.34|
        MOVS     r0,#0xb
|L24.28|
        ADD      sp,sp,#0x34
        POP      {r4-r11,pc}
|L24.34|
        LDR      r1,|L24.972|
        LDR      r0,[sp,#0x24]
        LDR      r4,[r1,r0,LSL #2]
        CBNZ     r4,|L24.48|
        MOVS     r0,#0xc
        B        |L24.28|
|L24.48|
        LDR      r0,[sp,#0x28]
        STR      r4,[r0,#0]
        LDRB     r0,[r4,#0x200]
        CBZ      r0,|L24.92|
        LDRB     r0,[r4,#0x201]
        BL       disk_status
        MOV      r9,r0
        AND      r0,r9,#1
        CBNZ     r0,|L24.92|
        LDR      r0,[sp,#0x30]
        CBZ      r0,|L24.88|
        AND      r0,r9,#4
        CBZ      r0,|L24.88|
        MOVS     r0,#0xa
        B        |L24.28|
|L24.88|
        MOVS     r0,#0
        B        |L24.28|
|L24.92|
        MOVS     r0,#0
        STRB     r0,[r4,#0x200]
        LDR      r0,[sp,#0x24]
        STRB     r0,[r4,#0x201]
        LDRB     r0,[r4,#0x201]
        BL       disk_initialize
        MOV      r9,r0
        AND      r0,r9,#1
        CBZ      r0,|L24.124|
        MOVS     r0,#3
        B        |L24.28|
|L24.124|
        LDR      r0,[sp,#0x30]
        CBZ      r0,|L24.138|
        AND      r0,r9,#4
        CBZ      r0,|L24.138|
        MOVS     r0,#0xa
        B        |L24.28|
|L24.138|
        MOVS     r7,#0
        MOV      r1,r7
        MOV      r0,r4
        BL       check_fs
        MOV      r5,r0
        CMP      r5,#1
        BEQ      |L24.158|
        CBNZ     r5,|L24.260|
        B        |L24.260|
|L24.158|
        MOVS     r6,#0
        B        |L24.216|
|L24.162|
        ADD      r0,r4,#0x1be
        ADD      r8,r0,r6,LSL #4
        LDRB     r0,[r8,#4]
        CBZ      r0,|L24.206|
        LDRB     r0,[r8,#0xb]
        LSLS     r1,r0,#24
        LDRB     r0,[r8,#0xa]
        ORR      r1,r1,r0,LSL #16
        LDRB     r0,[r8,#9]
        ORR      r0,r1,r0,LSL #8
        LDRB     r1,[r8,#8]
        ORRS     r0,r0,r1
        B        |L24.208|
|L24.206|
        MOVS     r0,#0
|L24.208|
        ADD      r1,sp,#8
        STR      r0,[r1,r6,LSL #2]
        ADDS     r6,r6,#1
|L24.216|
        CMP      r6,#4
        BCC      |L24.162|
        MOVS     r6,#0
        CBZ      r6,|L24.226|
        SUBS     r6,r6,#1
|L24.226|
        NOP      
|L24.228|
        ADD      r0,sp,#8
        LDR      r7,[r0,r6,LSL #2]
        CBZ      r7,|L24.246|
        MOV      r1,r7
        MOV      r0,r4
        BL       check_fs
        B        |L24.248|
|L24.246|
        MOVS     r0,#2
|L24.248|
        MOV      r5,r0
        CBZ      r5,|L24.260|
        ADDS     r0,r6,#1
        MOV      r6,r0
        CMP      r0,#4
        BCC      |L24.228|
|L24.260|
        CMP      r5,#3
        BNE      |L24.268|
        MOVS     r0,#1
        B        |L24.28|
|L24.268|
        CBZ      r5,|L24.274|
        MOVS     r0,#0xd
        B        |L24.28|
|L24.274|
        LDRB     r1,[r4,#0xb]
        LDRB     r0,[r4,#0xc]
        ORR      r0,r1,r0,LSL #8
        CMP      r0,#0x200
        BEQ      |L24.292|
        MOVS     r0,#0xd
        B        |L24.28|
|L24.292|
        LDRB     r1,[r4,#0x16]
        LDRB     r0,[r4,#0x17]
        ORR      r10,r1,r0,LSL #8
        CMP      r10,#0
        BNE      |L24.336|
        MOVS     r0,#0x27
        LDRB     r0,[r0,r4]
        LSLS     r1,r0,#24
        MOVS     r0,#0x26
        LDRB     r0,[r0,r4]
        ORR      r1,r1,r0,LSL #16
        MOVS     r0,#0x25
        LDRB     r0,[r0,r4]
        ORR      r0,r1,r0,LSL #8
        LDRB     r1,[r4,#0x24]
        ORR      r10,r0,r1
|L24.336|
        STR      r10,[r4,#0x218]
        LDRB     r0,[r4,#0x10]
        STRB     r0,[r4,#0x203]
        LDRB     r0,[r4,#0x203]
        CMP      r0,#1
        BEQ      |L24.366|
        LDRB     r0,[r4,#0x203]
        CMP      r0,#2
        BEQ      |L24.366|
        MOVS     r0,#0xd
        B        |L24.28|
|L24.366|
        LDRB     r0,[r4,#0x203]
        MUL      r10,r10,r0
        LDRB     r0,[r4,#0xd]
        STRB     r0,[r4,#0x202]
        LDRB     r0,[r4,#0x202]
        CBZ      r0,|L24.396|
        LDRB     r0,[r4,#0x202]
        SUBS     r1,r0,#1
        ANDS     r0,r0,r1
        CBZ      r0,|L24.400|
|L24.396|
        MOVS     r0,#0xd
        B        |L24.28|
|L24.400|
        LDRB     r1,[r4,#0x11]
        LDRB     r0,[r4,#0x12]
        ORR      r0,r1,r0,LSL #8
        STRH     r0,[r4,#0x208]
        LDRB     r0,[r4,#0x208]
        AND      r0,r0,#0xf
        CBZ      r0,|L24.426|
        MOVS     r0,#0xd
        B        |L24.28|
|L24.426|
        LDRB     r1,[r4,#0x13]
        LDRB     r0,[r4,#0x14]
        ORR      r0,r1,r0,LSL #8
        STR      r0,[sp,#0x20]
        LDR      r0,[sp,#0x20]
        CBNZ     r0,|L24.470|
        MOVS     r0,#0x23
        LDRB     r0,[r0,r4]
        LSLS     r1,r0,#24
        MOVS     r0,#0x22
        LDRB     r0,[r0,r4]
        ORR      r1,r1,r0,LSL #16
        MOVS     r0,#0x21
        LDRB     r0,[r0,r4]
        ORR      r0,r1,r0,LSL #8
        LDRB     r1,[r4,#0x20]
        ORRS     r0,r0,r1
        STR      r0,[sp,#0x20]
|L24.470|
        LDRB     r1,[r4,#0xe]
        LDRB     r0,[r4,#0xf]
        ORR      r0,r1,r0,LSL #8
        STR      r0,[sp,#4]
        LDR      r0,[sp,#4]
        CBNZ     r0,|L24.488|
        MOVS     r0,#0xd
        B        |L24.28|
|L24.488|
        LDR      r0,[sp,#4]
        ADD      r0,r0,r10
        LDRH     r1,[r4,#0x208]
        ADD      r0,r0,r1,LSR #4
        STR      r0,[sp,#0x1c]
        LDRD     r0,r1,[sp,#0x1c]
        CMP      r1,r0
        BCS      |L24.514|
        MOVS     r0,#0xd
        B        |L24.28|
|L24.514|
        LDRD     r1,r0,[sp,#0x1c]
        SUBS     r0,r0,r1
        LDRB     r1,[r4,#0x202]
        UDIV     r11,r0,r1
        CMP      r11,#0
        BNE      |L24.538|
        MOVS     r0,#0xd
        B        |L24.28|
|L24.538|
        MOVS     r5,#1
        MOV      r0,#0xff6
        CMP      r11,r0
        BCC      |L24.550|
        MOVS     r5,#2
|L24.550|
        MOV      r0,#0xfff6
        CMP      r11,r0
        BCC      |L24.560|
        MOVS     r5,#3
|L24.560|
        ADD      r0,r11,#2
        STR      r0,[r4,#0x214]
        STR      r7,[r4,#0x21c]
        LDR      r0,[sp,#4]
        ADD      r0,r0,r7
        STR      r0,[r4,#0x220]
        LDR      r0,[sp,#0x1c]
        ADD      r0,r0,r7
        STR      r0,[r4,#0x228]
        CMP      r5,#3
        BNE      |L24.644|
        LDRH     r0,[r4,#0x208]
        CBZ      r0,|L24.602|
        MOVS     r0,#0xd
        B        |L24.28|
|L24.602|
        MOVS     r0,#0x2f
        LDRB     r0,[r0,r4]
        LSLS     r1,r0,#24
        MOVS     r0,#0x2e
        LDRB     r0,[r0,r4]
        ORR      r1,r1,r0,LSL #16
        MOVS     r0,#0x2d
        LDRB     r0,[r0,r4]
        ORR      r0,r1,r0,LSL #8
        LDRB     r1,[r4,#0x2c]
        ORRS     r0,r0,r1
        STR      r0,[r4,#0x224]
        LDR      r0,[r4,#0x214]
        LSLS     r0,r0,#2
        STR      r0,[sp,#0x18]
        B        |L24.698|
|L24.644|
        LDRH     r0,[r4,#0x208]
        CBNZ     r0,|L24.654|
        MOVS     r0,#0xd
        B        |L24.28|
|L24.654|
        LDR      r0,[r4,#0x220]
        ADD      r0,r0,r10
        STR      r0,[r4,#0x224]
        CMP      r5,#2
        BNE      |L24.676|
        LDR      r0,[r4,#0x214]
        LSLS     r0,r0,#1
        B        |L24.696|
|L24.676|
        LDRB     r0,[r4,#0x214]
        AND      r0,r0,#1
        LDR      r1,[r4,#0x214]
        ADD      r1,r1,r1,LSL #1
        ADD      r0,r0,r1,LSR #1
|L24.696|
        STR      r0,[sp,#0x18]
|L24.698|
        LDR      r1,[r4,#0x218]
        LDR      r0,[sp,#0x18]
        ADD      r0,r0,#0x1ff
        CMP      r1,r0,LSR #9
        BCS      |L24.718|
        MOVS     r0,#0xd
        B        |L24.28|
|L24.718|
        MOV      r0,#0xffffffff
        STR      r0,[r4,#0x210]
        STR      r0,[r4,#0x20c]
        MOVS     r0,#0x80
        STRB     r0,[r4,#0x205]
        CMP      r5,#3
        BNE      |L24.940|
        LDRB     r1,[r4,#0x30]
        MOVS     r0,#0x31
        LDRB     r0,[r0,r4]
        ORR      r0,r1,r0,LSL #8
        CMP      r0,#1
        BNE      |L24.940|
        ADDS     r1,r7,#1
        MOV      r0,r4
        BL       move_window
        CBNZ     r0,|L24.890|
        MOVS     r0,#0
        STRB     r0,[r4,#0x205]
        LDRB     r1,[r4,#0x1fe]
        MOV      r0,#0x1ff
        LDRB     r0,[r0,r4]
        ORR      r0,r1,r0,LSL #8
        MOV      r1,#0xaa55
        CMP      r0,r1
        BNE      |L24.940|
        LDRB     r0,[r4,#3]
        LSLS     r0,r0,#24
        LDRB     r1,[r4,#2]
        ORR      r0,r0,r1,LSL #16
        LDRB     r1,[r4,#1]
        ORR      r0,r0,r1,LSL #8
        LDRB     r1,[r4,#0]
        ORRS     r0,r0,r1
        LDR      r1,|L24.976|
        CMP      r0,r1
        BNE      |L24.940|
        MOV      r0,#0x1e7
        LDRB     r0,[r0,r4]
        LSLS     r1,r0,#24
        MOV      r0,#0x1e6
        LDRB     r0,[r0,r4]
        ORR      r1,r1,r0,LSL #16
        MOV      r0,#0x1e5
        LDRB     r0,[r0,r4]
        ORR      r0,r1,r0,LSL #8
        LDRB     r1,[r4,#0x1e4]
        ORRS     r0,r0,r1
        LDR      r1,|L24.980|
        CMP      r0,r1
        BNE      |L24.940|
        MOV      r0,#0x1eb
        LDRB     r0,[r0,r4]
        LSLS     r1,r0,#24
        MOV      r0,#0x1ea
        LDRB     r0,[r0,r4]
        ORR      r1,r1,r0,LSL #16
        MOV      r0,#0x1e9
        LDRB     r0,[r0,r4]
        ORR      r0,r1,r0,LSL #8
        B        |L24.892|
|L24.890|
        B        |L24.940|
|L24.892|
        LDRB     r1,[r4,#0x1e8]
        ORRS     r0,r0,r1
        STR      r0,[r4,#0x210]
        MOV      r0,#0x1ef
        LDRB     r0,[r0,r4]
        LSLS     r1,r0,#24
        MOV      r0,#0x1ee
        LDRB     r0,[r0,r4]
        ORR      r1,r1,r0,LSL #16
        MOV      r0,#0x1ed
        LDRB     r0,[r0,r4]
        ORR      r0,r1,r0,LSL #8
        LDRB     r1,[r4,#0x1ec]
        ORRS     r0,r0,r1
        STR      r0,[r4,#0x20c]
|L24.940|
        STRB     r5,[r4,#0x200]
        LDR      r0,|L24.984|
        LDRH     r0,[r0,#0]  ; Fsid
        ADDS     r0,r0,#1
        UXTH     r0,r0
        LDR      r1,|L24.984|
        STRH     r0,[r1,#0]
        STRH     r0,[r4,#0x206]
        MOV      r0,r4
        BL       clear_lock
        MOVS     r0,#0
        B        |L24.28|
        ENDP

        DCW      0x0000
|L24.972|
        DCD      FatFs
|L24.976|
        DCD      0x41615252
|L24.980|
        DCD      0x61417272
|L24.984|
        DCD      Fsid

        AREA ||i.fit_lfn||, CODE, READONLY, ALIGN=2

fit_lfn PROC
        PUSH     {r4-r7,lr}
        MOV      r4,r0
        MOV      r5,r3
        STRB     r5,[r1,#0xd]
        MOVS     r7,#0xf
        STRB     r7,[r1,#0xb]
        MOVS     r7,#0
        STRB     r7,[r1,#0xc]
        STRB     r7,[r1,#0x1a]
        MOV      r12,r7
        STRB     r12,[r1,#0x1b]
        SUBS     r7,r2,#1
        ADD      r12,r7,r7,LSL #2
        ADD      r6,r12,r7,LSL #3
        MOVS     r7,#0
        MOV      r0,r7
        MOV      r3,r7
        NOP      
|L25.42|
        MOV      r7,#0xffff
        CMP      r0,r7
        BEQ      |L25.58|
        MOV      r7,r6
        ADDS     r6,r6,#1
        LDRH     r0,[r4,r7,LSL #1]
|L25.58|
        LDR      r12,|L25.124|
        LDRB     r12,[r12,r3]
        STRB     r0,[r1,r12]
        ASRS     r7,r0,#8
        LDR      r12,|L25.124|
        LDRB     r12,[r12,r3]
        ADD      r12,r12,r1
        STRB     r7,[r12,#1]
        CBNZ     r0,|L25.92|
        MOV      r0,#0xffff
|L25.92|
        ADDS     r7,r3,#1
        MOV      r3,r7
        CMP      r7,#0xd
        BCC      |L25.42|
        MOV      r7,#0xffff
        CMP      r0,r7
        BEQ      |L25.114|
        LDRH     r7,[r4,r6,LSL #1]
        CBNZ     r7,|L25.118|
|L25.114|
        ORR      r2,r2,#0x40
|L25.118|
        STRB     r2,[r1,#0]
        POP      {r4-r7,pc}
        ENDP

        DCW      0x0000
|L25.124|
        DCD      LfnOfs

        AREA ||i.follow_path||, CODE, READONLY, ALIGN=1

follow_path PROC
        PUSH     {r0,r1,r4-r8,lr}
        MOV      r4,r0
        LDR      r0,[sp,#4]
        LDRB     r0,[r0,#0]
        CMP      r0,#0x2f
        BEQ      |L26.22|
        LDR      r0,[sp,#4]
        LDRB     r0,[r0,#0]
        CMP      r0,#0x5c
        BNE      |L26.28|
|L26.22|
        LDR      r0,[sp,#4]
        ADDS     r0,r0,#1
        STR      r0,[sp,#4]
|L26.28|
        MOVS     r0,#0
        STR      r0,[r4,#0x208]
        LDR      r0,[sp,#4]
        LDRB     r0,[r0,#0]
        CMP      r0,#0x20
        BCS      |L26.60|
        MOVS     r1,#0
        MOV      r0,r4
        BL       dir_sdi
        MOV      r5,r0
        MOVS     r0,#0
        STR      r0,[r4,#0x214]
        B        |L26.150|
|L26.60|
        NOP      
|L26.62|
        ADD      r1,sp,#4
        MOV      r0,r4
        BL       create_name
        MOV      r5,r0
        CBZ      r5,|L26.76|
        B        |L26.148|
|L26.76|
        MOV      r0,r4
        BL       dir_find
        MOV      r5,r0
        LDR      r0,[r4,#0x218]
        LDRB     r6,[r0,#0xb]
        CBZ      r5,|L26.108|
        CMP      r5,#4
        BNE      |L26.106|
        NOP      
        AND      r0,r6,#4
        CBNZ     r0,|L26.106|
        MOVS     r5,#5
|L26.106|
        B        |L26.148|
|L26.108|
        AND      r0,r6,#4
        CBZ      r0,|L26.116|
        B        |L26.148|
|L26.116|
        LDR      r7,[r4,#0x214]
        LDRB     r0,[r7,#0xb]
        AND      r0,r0,#0x10
        CBNZ     r0,|L26.132|
        MOVS     r5,#5
        B        |L26.148|
|L26.132|
        MOV      r1,r7
        LDR      r0,[r4,#0x200]
        BL       ld_clust
        STR      r0,[r4,#0x208]
        B        |L26.62|
|L26.148|
        NOP      
|L26.150|
        MOV      r0,r5
        POP      {r2-r8,pc}
        ENDP


        AREA ||i.gen_numname||, CODE, READONLY, ALIGN=2

gen_numname PROC
        PUSH     {r0-r11,lr}
        SUB      sp,sp,#0xc
        MOV      r9,r0
        MOV      r8,r2
        MOV      r5,r3
        MOVS     r2,#0xb
        MOV      r0,r9
        LDR      r1,[sp,#0x10]
        BL       mem_cpy
        CMP      r5,#5
        BLS      |L27.76|
        MOV      r7,r5
        B        |L27.66|
|L27.30|
        LDRH     r11,[r8],#2
        MOVS     r4,#0
        B        |L27.62|
|L27.38|
        MOV      r0,r11
        BFI      r0,r7,#1,#31
        MOV      r7,r0
        ASR      r11,r11,#1
        AND      r0,r7,#0x10000
        CBZ      r0,|L27.60|
        LDR      r0,|L27.176|
        EORS     r7,r7,r0
|L27.60|
        ADDS     r4,r4,#1
|L27.62|
        CMP      r4,#0x10
        BCC      |L27.38|
|L27.66|
        LDRH     r0,[r8,#0]
        CMP      r0,#0
        BNE      |L27.30|
        MOV      r5,r7
|L27.76|
        MOVS     r4,#7
        NOP      
|L27.80|
        AND      r0,r5,#0xf
        ADD      r10,r0,#0x30
        CMP      r10,#0x39
        BLE      |L27.102|
        ADD      r0,r10,#7
        AND      r10,r0,#0xff
|L27.102|
        MOV      r0,r4
        SUBS     r4,r4,#1
        ADD      r1,sp,#4
        STRB     r10,[r1,r0]
        LSRS     r5,r5,#4
        CMP      r5,#0
        BNE      |L27.80|
        MOVS     r0,#0x7e
        STRB     r0,[r1,r4]
        MOVS     r6,#0
        B        |L27.128|
|L27.126|
        ADDS     r6,r6,#1
|L27.128|
        CMP      r6,r4
        BCS      |L27.140|
        LDRB     r0,[r9,r6]
        CMP      r0,#0x20
        BNE      |L27.126|
|L27.140|
        NOP      
|L27.142|
        CMP      r4,#8
        BCS      |L27.156|
        MOV      r0,r4
        ADDS     r4,r4,#1
        ADD      r1,sp,#4
        LDRB     r0,[r1,r0]
        B        |L27.158|
|L27.156|
        MOVS     r0,#0x20
|L27.158|
        MOV      r1,r6
        ADDS     r6,r6,#1
        STRB     r0,[r9,r1]
        CMP      r6,#8
        BCC      |L27.142|
        ADD      sp,sp,#0x1c
        POP      {r4-r11,pc}
        ENDP

|L27.176|
        DCD      0x00011021

        AREA ||i.get_fat||, CODE, READONLY, ALIGN=1

get_fat PROC
        PUSH     {r4-r10,lr}
        MOV      r5,r0
        MOV      r4,r1
        CMP      r4,#2
        BCC      |L28.20|
        LDR      r0,[r5,#0x214]
        CMP      r0,r4
        BHI      |L28.26|
|L28.20|
        MOV      r9,#1
        B        |L28.232|
|L28.26|
        MOV      r9,#0xffffffff
        LDRB     r0,[r5,#0x200]
        CMP      r0,#1
        BEQ      |L28.48|
        CMP      r0,#2
        BEQ      |L28.132|
        CMP      r0,#3
        BNE      |L28.224|
        B        |L28.170|
|L28.48|
        MOV      r7,r4
        ADD      r7,r7,r7,LSR #1
        LDR      r0,[r5,#0x220]
        ADD      r1,r0,r7,LSR #9
        MOV      r0,r5
        BL       move_window
        CBZ      r0,|L28.72|
        B        |L28.230|
|L28.72|
        MOV      r0,r7
        ADDS     r7,r7,#1
        UBFX     r0,r0,#0,#9
        LDRB     r8,[r5,r0]
        LDR      r0,[r5,#0x220]
        ADD      r1,r0,r7,LSR #9
        MOV      r0,r5
        BL       move_window
        CBZ      r0,|L28.102|
        B        |L28.230|
|L28.102|
        UBFX     r0,r7,#0,#9
        LDRB     r0,[r5,r0]
        ORR      r8,r8,r0,LSL #8
        AND      r0,r4,#1
        CBZ      r0,|L28.124|
        LSR      r0,r8,#4
        B        |L28.128|
|L28.124|
        UBFX     r0,r8,#0,#12
|L28.128|
        MOV      r9,r0
        B        |L28.230|
|L28.132|
        LDR      r0,[r5,#0x220]
        ADD      r1,r0,r4,LSR #8
        MOV      r0,r5
        BL       move_window
        CBZ      r0,|L28.150|
        B        |L28.230|
|L28.150|
        MOV      r0,#0x1ff
        AND      r0,r0,r4,LSL #1
        ADDS     r6,r0,r5
        LDRB     r0,[r6,#0]
        LDRB     r1,[r6,#1]
        ORR      r9,r0,r1,LSL #8
        B        |L28.230|
|L28.170|
        LDR      r0,[r5,#0x220]
        ADD      r1,r0,r4,LSR #7
        MOV      r0,r5
        BL       move_window
        CBZ      r0,|L28.188|
        B        |L28.230|
|L28.188|
        MOV      r0,#0x1ff
        AND      r0,r0,r4,LSL #2
        ADDS     r6,r0,r5
        LDRB     r0,[r6,#3]
        LSLS     r0,r0,#24
        LDRB     r1,[r6,#2]
        ORR      r0,r0,r1,LSL #16
        LDRB     r1,[r6,#1]
        ORR      r0,r0,r1,LSL #8
        LDRB     r1,[r6,#0]
        ORRS     r0,r0,r1
        BIC      r9,r0,#0xf0000000
        B        |L28.230|
|L28.224|
        MOV      r9,#1
        NOP      
|L28.230|
        NOP      
|L28.232|
        MOV      r0,r9
        POP      {r4-r10,pc}
        ENDP


        AREA ||i.get_ldnumber||, CODE, READONLY, ALIGN=1

get_ldnumber PROC
        PUSH     {r4-r6,lr}
        MOV      r2,r0
        MOV      r0,#0xffffffff
        LDR      r5,[r2,#0]
        CBZ      r5,|L29.68|
        LDR      r1,[r2,#0]
        B        |L29.18|
|L29.16|
        ADDS     r1,r1,#1
|L29.18|
        LDRB     r5,[r1,#0]
        CMP      r5,#0x20
        BCC      |L29.30|
        LDRB     r5,[r1,#0]
        CMP      r5,#0x3a
        BNE      |L29.16|
|L29.30|
        LDRB     r5,[r1,#0]
        CMP      r5,#0x3a
        BNE      |L29.66|
        LDR      r4,[r2,#0]
        LDRB     r5,[r4],#1
        SUB      r3,r5,#0x30
        CMP      r3,#0xa
        BCS      |L29.64|
        CMP      r4,r1
        BNE      |L29.64|
        CBNZ     r3,|L29.64|
        MOV      r0,r3
        ADDS     r5,r1,#1
        MOV      r1,r5
        STR      r5,[r2,#0]
|L29.64|
        POP      {r4-r6,pc}
|L29.66|
        MOVS     r0,#0
|L29.68|
        NOP      
        B        |L29.64|
        ENDP


        AREA ||i.inc_lock||, CODE, READONLY, ALIGN=2

inc_lock PROC
        PUSH     {r4,r5,lr}
        MOV      r2,r0
        MOV      r3,r1
        MOVS     r1,#0
        B        |L30.72|
|L30.10|
        ADD      r0,r1,r1,LSL #1
        LDR      r4,|L30.228|
        LDR      r0,[r4,r0,LSL #2]
        LDR      r4,[r2,#0x200]
        CMP      r0,r4
        BNE      |L30.70|
        ADD      r0,r1,r1,LSL #1
        LDR      r4,|L30.228|
        ADD      r0,r4,r0,LSL #2
        LDR      r0,[r0,#4]
        LDR      r4,[r2,#0x208]
        CMP      r0,r4
        BNE      |L30.70|
        ADD      r0,r1,r1,LSL #1
        LDR      r4,|L30.228|
        ADD      r0,r4,r0,LSL #2
        LDRH     r0,[r0,#8]
        LDRH     r4,[r2,#0x206]
        CMP      r0,r4
        BNE      |L30.70|
        B        |L30.76|
|L30.70|
        ADDS     r1,r1,#1
|L30.72|
        CMP      r1,#0xa
        BCC      |L30.10|
|L30.76|
        NOP      
        CMP      r1,#0xa
        BNE      |L30.168|
        MOVS     r1,#0
        B        |L30.88|
|L30.86|
        ADDS     r1,r1,#1
|L30.88|
        CMP      r1,#0xa
        BCS      |L30.106|
        ADD      r0,r1,r1,LSL #1
        LDR      r4,|L30.228|
        LDR      r0,[r4,r0,LSL #2]
        CMP      r0,#0
        BNE      |L30.86|
|L30.106|
        CMP      r1,#0xa
        BNE      |L30.114|
        MOVS     r0,#0
|L30.112|
        POP      {r4,r5,pc}
|L30.114|
        ADD      r4,r1,r1,LSL #1
        LDR      r5,|L30.228|
        LDR      r0,[r2,#0x200]
        STR      r0,[r5,r4,LSL #2]
        ADD      r4,r1,r1,LSL #1
        ADD      r4,r5,r4,LSL #2
        LDR      r0,[r2,#0x208]
        STR      r0,[r4,#4]
        LDRH     r0,[r2,#0x206]
        ADD      r4,r1,r1,LSL #1
        ADD      r4,r5,r4,LSL #2
        STRH     r0,[r4,#8]
        MOVS     r0,#0
        ADD      r4,r1,r1,LSL #1
        ADD      r4,r5,r4,LSL #2
        STRH     r0,[r4,#0xa]
|L30.168|
        CBZ      r3,|L30.188|
        ADD      r0,r1,r1,LSL #1
        LDR      r4,|L30.228|
        ADD      r0,r4,r0,LSL #2
        LDRH     r0,[r0,#0xa]
        CBZ      r0,|L30.188|
        MOVS     r0,#0
        B        |L30.112|
|L30.188|
        CBZ      r3,|L30.196|
        MOV      r0,#0x100
        B        |L30.210|
|L30.196|
        ADD      r0,r1,r1,LSL #1
        LDR      r4,|L30.228|
        ADD      r0,r4,r0,LSL #2
        LDRH     r0,[r0,#0xa]
        ADDS     r0,r0,#1
|L30.210|
        ADD      r4,r1,r1,LSL #1
        LDR      r5,|L30.228|
        ADD      r4,r5,r4,LSL #2
        STRH     r0,[r4,#0xa]
        ADDS     r0,r1,#1
        B        |L30.112|
        ENDP

        DCW      0x0000
|L30.228|
        DCD      Files

        AREA ||i.ld_clust||, CODE, READONLY, ALIGN=1

ld_clust PROC
        PUSH     {r4,lr}
        MOV      r2,r0
        LDRB     r4,[r1,#0x1a]
        LDRB     r3,[r1,#0x1b]
        ORR      r0,r4,r3,LSL #8
        LDRB     r3,[r2,#0x200]
        CMP      r3,#3
        BNE      |L31.32|
        LDRB     r4,[r1,#0x14]
        LDRB     r3,[r1,#0x15]
        ORR      r3,r4,r3,LSL #8
        ORR      r0,r0,r3,LSL #16
|L31.32|
        POP      {r4,pc}
        ENDP


        AREA ||i.mem_cmp||, CODE, READONLY, ALIGN=1

mem_cmp PROC
        PUSH     {r4-r7,lr}
        MOV      r3,r0
        MOV      r4,r3
        MOV      r5,r1
        MOVS     r0,#0
        NOP      
|L32.12|
        SUBS     r6,r2,#0
        SUB      r2,r2,#1
        BEQ      |L32.36|
        LDRB     r7,[r4],#1
        LDRB     r12,[r5],#1
        SUB      r6,r7,r12
        SUBS     r0,r6,#0
        BEQ      |L32.12|
|L32.36|
        POP      {r4-r7,pc}
        ENDP


        AREA ||i.mem_cpy||, CODE, READONLY, ALIGN=1

mem_cpy PROC
        PUSH     {r4-r6,lr}
        MOV      r3,r0
        MOV      r4,r1
        B        |L33.16|
|L33.8|
        LDRB     r5,[r4],#1
        STRB     r5,[r3],#1
|L33.16|
        SUBS     r5,r2,#0
        SUB      r2,r2,#1
        BNE      |L33.8|
        POP      {r4-r6,pc}
        ENDP


        AREA ||i.mem_set||, CODE, READONLY, ALIGN=1

mem_set PROC
        PUSH     {r4,r5,lr}
        MOV      r3,r0
        B        |L34.10|
|L34.6|
        STRB     r1,[r3],#1
|L34.10|
        SUBS     r4,r2,#0
        SUB      r2,r2,#1
        BNE      |L34.6|
        POP      {r4,r5,pc}
        ENDP


        AREA ||i.move_window||, CODE, READONLY, ALIGN=1

move_window PROC
        PUSH     {r4-r6,lr}
        MOV      r4,r0
        MOV      r5,r1
        MOVS     r6,#0
        LDR      r0,[r4,#0x22c]
        CMP      r0,r5
        BEQ      |L35.52|
        MOV      r0,r4
        BL       sync_window
        MOV      r6,r0
        CBNZ     r6,|L35.52|
        LDRB     r0,[r4,#0x201]
        MOVS     r3,#1
        MOV      r2,r5
        MOV      r1,r4
        BL       disk_read
        CBZ      r0,|L35.48|
        MOV      r5,#0xffffffff
        MOVS     r6,#1
|L35.48|
        STR      r5,[r4,#0x22c]
|L35.52|
        MOV      r0,r6
        POP      {r4-r6,pc}
        ENDP


        AREA ||i.pick_lfn||, CODE, READONLY, ALIGN=2

pick_lfn PROC
        PUSH     {r4-r7,lr}
        MOV      r3,r0
        LDRB     r0,[r1,#0]
        AND      r0,r0,#0x3f
        SUBS     r0,r0,#1
        ADD      r7,r0,r0,LSL #2
        ADD      r2,r7,r0,LSL #3
        MOVS     r5,#0
        MOVS     r6,#1
        NOP      
|L36.26|
        LDR      r0,|L36.112|
        LDRB     r0,[r0,r5]
        LDRB     r0,[r1,r0]
        LDR      r7,|L36.112|
        LDRB     r7,[r7,r5]
        ADD      r7,r7,r1
        LDRB     r7,[r7,#1]
        ORR      r4,r0,r7,LSL #8
        CBZ      r6,|L36.66|
        CMP      r2,#0xff
        BCC      |L36.54|
        MOVS     r0,#0
|L36.52|
        POP      {r4-r7,pc}
|L36.54|
        MOV      r6,r4
        MOV      r0,r2
        ADDS     r2,r2,#1
        STRH     r4,[r3,r0,LSL #1]
        B        |L36.78|
|L36.66|
        MOV      r0,#0xffff
        CMP      r4,r0
        BEQ      |L36.78|
        MOVS     r0,#0
        B        |L36.52|
|L36.78|
        ADDS     r0,r5,#1
        MOV      r5,r0
        CMP      r0,#0xd
        BCC      |L36.26|
        LDRB     r0,[r1,#0]
        AND      r0,r0,#0x40
        CBZ      r0,|L36.108|
        CMP      r2,#0xff
        BCC      |L36.102|
        MOVS     r0,#0
        B        |L36.52|
|L36.102|
        MOVS     r0,#0
        STRH     r0,[r3,r2,LSL #1]
|L36.108|
        MOVS     r0,#1
        B        |L36.52|
        ENDP

|L36.112|
        DCD      LfnOfs

        AREA ||i.put_fat||, CODE, READONLY, ALIGN=1

put_fat PROC
        PUSH     {r4-r10,lr}
        MOV      r5,r0
        MOV      r6,r1
        MOV      r7,r2
        CMP      r6,#2
        BCC      |L37.22|
        LDR      r0,[r5,#0x214]
        CMP      r0,r6
        BHI      |L37.28|
|L37.22|
        MOV      r8,#2
        B        |L37.320|
|L37.28|
        LDRB     r0,[r5,#0x200]
        CMP      r0,#1
        BEQ      |L37.46|
        CMP      r0,#2
        BEQ      |L37.178|
        CMP      r0,#3
        BNE      |L37.296|
        B        |L37.226|
|L37.46|
        MOV      r9,r6
        ADD      r9,r9,r9,LSR #1
        LDR      r0,[r5,#0x220]
        ADD      r1,r0,r9,LSR #9
        MOV      r0,r5
        BL       move_window
        MOV      r8,r0
        CMP      r8,#0
        BEQ      |L37.76|
        B        |L37.318|
|L37.76|
        MOV      r0,r9
        ADD      r9,r9,#1
        UBFX     r0,r0,#0,#9
        ADDS     r4,r0,r5
        AND      r0,r6,#1
        CBZ      r0,|L37.104|
        UXTB     r1,r7
        LDRB     r0,[r4,#0]
        BFI      r0,r1,#4,#28
        B        |L37.106|
|L37.104|
        MOV      r0,r7
|L37.106|
        STRB     r0,[r4,#0]
        MOVS     r0,#1
        STRB     r0,[r5,#0x204]
        LDR      r0,[r5,#0x220]
        ADD      r1,r0,r9,LSR #9
        MOV      r0,r5
        BL       move_window
        MOV      r8,r0
        CMP      r8,#0
        BEQ      |L37.138|
        B        |L37.318|
|L37.138|
        UBFX     r0,r9,#0,#9
        ADDS     r4,r0,r5
        AND      r0,r6,#1
        CBZ      r0,|L37.156|
        UBFX     r0,r7,#4,#8
        B        |L37.168|
|L37.156|
        LDRB     r0,[r4,#0]
        AND      r0,r0,#0xf0
        UBFX     r1,r7,#8,#4
        ORRS     r0,r0,r1
|L37.168|
        STRB     r0,[r4,#0]
        MOVS     r0,#1
        STRB     r0,[r5,#0x204]
        B        |L37.318|
|L37.178|
        LDR      r0,[r5,#0x220]
        ADD      r1,r0,r6,LSR #8
        MOV      r0,r5
        BL       move_window
        MOV      r8,r0
        CMP      r8,#0
        BEQ      |L37.202|
        B        |L37.318|
|L37.202|
        MOV      r0,#0x1ff
        AND      r0,r0,r6,LSL #1
        ADDS     r4,r0,r5
        STRB     r7,[r4,#0]
        LSRS     r0,r7,#8
        STRB     r0,[r4,#1]
        MOVS     r0,#1
        STRB     r0,[r5,#0x204]
        B        |L37.318|
|L37.226|
        LDR      r0,[r5,#0x220]
        ADD      r1,r0,r6,LSR #7
        MOV      r0,r5
        BL       move_window
        MOV      r8,r0
        CMP      r8,#0
        BEQ      |L37.250|
        B        |L37.318|
|L37.250|
        MOV      r0,#0x1ff
        AND      r0,r0,r6,LSL #2
        ADDS     r4,r0,r5
        LDRB     r0,[r4,#3]
        LSLS     r0,r0,#24
        LDRB     r1,[r4,#2]
        ORR      r0,r0,r1,LSL #16
        LDRB     r1,[r4,#1]
        ORR      r0,r0,r1,LSL #8
        LDRB     r1,[r4,#0]
        ORRS     r0,r0,r1
        AND      r0,r0,#0xf0000000
        ORRS     r7,r7,r0
        STRB     r7,[r4,#0]
        LSRS     r0,r7,#8
        STRB     r0,[r4,#1]
        LSRS     r0,r7,#16
        B        |L37.298|
|L37.296|
        B        |L37.312|
|L37.298|
        STRB     r0,[r4,#2]
        LSRS     r0,r7,#24
        STRB     r0,[r4,#3]
        MOVS     r0,#1
        STRB     r0,[r5,#0x204]
        B        |L37.318|
|L37.312|
        MOV      r8,#2
        NOP      
|L37.318|
        NOP      
|L37.320|
        MOV      r0,r8
        POP      {r4-r10,pc}
        ENDP


        AREA ||i.remove_chain||, CODE, READONLY, ALIGN=1

remove_chain PROC
        PUSH     {r4-r8,lr}
        MOV      r4,r0
        MOV      r6,r1
        CMP      r6,#2
        BCC      |L38.20|
        LDR      r0,[r4,#0x214]
        CMP      r0,r6
        BHI      |L38.24|
|L38.20|
        MOVS     r7,#2
        B        |L38.116|
|L38.24|
        MOVS     r7,#0
        B        |L38.106|
|L38.28|
        MOV      r1,r6
        MOV      r0,r4
        BL       get_fat
        MOV      r5,r0
        CBNZ     r5,|L38.42|
        B        |L38.114|
|L38.42|
        CMP      r5,#1
        BNE      |L38.50|
        MOVS     r7,#2
        B        |L38.114|
|L38.50|
        ADDS     r0,r5,#1
        CBNZ     r0,|L38.58|
        MOVS     r7,#1
        B        |L38.114|
|L38.58|
        MOVS     r2,#0
        MOV      r1,r6
        MOV      r0,r4
        BL       put_fat
        MOV      r7,r0
        CBZ      r7,|L38.74|
        B        |L38.114|
|L38.74|
        LDR      r0,[r4,#0x210]
        ADDS     r0,r0,#1
        CBZ      r0,|L38.104|
        LDR      r0,[r4,#0x210]
        ADDS     r0,r0,#1
        STR      r0,[r4,#0x210]
        LDRB     r0,[r4,#0x205]
        ORR      r0,r0,#1
        STRB     r0,[r4,#0x205]
|L38.104|
        MOV      r6,r5
|L38.106|
        LDR      r0,[r4,#0x214]
        CMP      r0,r6
        BHI      |L38.28|
|L38.114|
        NOP      
|L38.116|
        MOV      r0,r7
        POP      {r4-r8,pc}
        ENDP


        AREA ||i.st_clust||, CODE, READONLY, ALIGN=1

st_clust PROC
        STRB     r1,[r0,#0x1a]
        LSRS     r3,r1,#8
        STRB     r3,[r0,#0x1b]
        LSRS     r2,r1,#16
        STRB     r2,[r0,#0x14]
        LSRS     r3,r1,#24
        STRB     r3,[r0,#0x15]
        BX       lr
        ENDP


        AREA ||i.sum_sfn||, CODE, READONLY, ALIGN=1

sum_sfn PROC
        PUSH     {r4,r5,lr}
        MOV      r1,r0
        MOVS     r0,#0
        MOVS     r2,#0xb
        NOP      
|L40.10|
        ASRS     r3,r0,#1
        ADD      r4,r3,r0,LSL #7
        LDRB     r5,[r1],#1
        ADDS     r3,r4,r5
        UXTB     r0,r3
        SUBS     r3,r2,#1
        SUBS     r2,r3,#0
        BNE      |L40.10|
        POP      {r4,r5,pc}
        ENDP


        AREA ||i.sync_fs||, CODE, READONLY, ALIGN=1

sync_fs PROC
        PUSH     {r4-r6,lr}
        MOV      r4,r0
        MOV      r0,r4
        BL       sync_window
        MOV      r5,r0
        CMP      r5,#0
        BNE      |L41.240|
        LDRB     r0,[r4,#0x200]
        CMP      r0,#3
        BNE      |L41.224|
        LDRB     r0,[r4,#0x205]
        CMP      r0,#1
        BNE      |L41.224|
        LSLS     r2,r0,#9
        MOVS     r1,#0
        MOV      r0,r4
        BL       mem_set
        MOVS     r0,#0x55
        STRB     r0,[r4,#0x1fe]
        MOVS     r1,#0xaa
        MOV      r0,#0x1ff
        STRB     r1,[r0,r4]
        MOVS     r0,#0x52
        STRB     r0,[r4,#0]
        STRB     r0,[r4,#1]
        MOVS     r0,#0x61
        STRB     r0,[r4,#2]
        MOVS     r0,#0x41
        STRB     r0,[r4,#3]
        MOVS     r0,#0x72
        STRB     r0,[r4,#0x1e4]
        MOVS     r1,#0x72
        MOV      r0,#0x1e5
        STRB     r1,[r0,r4]
        MOVS     r1,#0x41
        ADDS     r0,r0,#1
        STRB     r1,[r0,r4]
        MOVS     r1,#0x61
        ADDS     r0,r0,#1
        STRB     r1,[r0,r4]
        LDRB     r0,[r4,#0x210]
        STRB     r0,[r4,#0x1e8]
        LDRH     r0,[r4,#0x210]
        UBFX     r1,r0,#8,#8
        MOV      r0,#0x1e9
        STRB     r1,[r0,r4]
        LDR      r0,[r4,#0x210]
        UBFX     r1,r0,#16,#8
        MOV      r0,#0x1ea
        STRB     r1,[r0,r4]
        LDR      r0,[r4,#0x210]
        LSRS     r1,r0,#24
        MOV      r0,#0x1eb
        STRB     r1,[r0,r4]
        LDRB     r0,[r4,#0x20c]
        STRB     r0,[r4,#0x1ec]
        LDRH     r0,[r4,#0x20c]
        UBFX     r1,r0,#8,#8
        MOV      r0,#0x1ed
        STRB     r1,[r0,r4]
        LDR      r0,[r4,#0x20c]
        UBFX     r1,r0,#16,#8
        MOV      r0,#0x1ee
        STRB     r1,[r0,r4]
        LDR      r0,[r4,#0x20c]
        LSRS     r1,r0,#24
        MOV      r0,#0x1ef
        STRB     r1,[r0,r4]
        LDR      r0,[r4,#0x21c]
        ADDS     r0,r0,#1
        STR      r0,[r4,#0x22c]
        LDRB     r0,[r4,#0x201]
        MOVS     r3,#1
        MOV      r1,r4
        LDR      r2,[r4,#0x22c]
        BL       disk_write
        MOVS     r0,#0
        STRB     r0,[r4,#0x205]
|L41.224|
        LDRB     r0,[r4,#0x201]
        MOVS     r2,#0
        MOV      r1,r2
        BL       disk_ioctl
        CBZ      r0,|L41.240|
        MOVS     r5,#1
|L41.240|
        MOV      r0,r5
        POP      {r4-r6,pc}
        ENDP


        AREA ||i.sync_window||, CODE, READONLY, ALIGN=1

sync_window PROC
        PUSH     {r4-r8,lr}
        MOV      r4,r0
        MOVS     r7,#0
        LDRB     r0,[r4,#0x204]
        CBZ      r0,|L42.90|
        LDR      r5,[r4,#0x22c]
        LDRB     r0,[r4,#0x201]
        MOVS     r3,#1
        MOV      r2,r5
        MOV      r1,r4
        BL       disk_write
        CBZ      r0,|L42.38|
        MOVS     r7,#1
        B        |L42.90|
|L42.38|
        MOVS     r0,#0
        STRB     r0,[r4,#0x204]
        LDR      r0,[r4,#0x220]
        SUBS     r0,r5,r0
        LDR      r1,[r4,#0x218]
        CMP      r0,r1
        BCS      |L42.90|
        LDRB     r6,[r4,#0x203]
        B        |L42.86|
|L42.64|
        LDR      r0,[r4,#0x218]
        ADD      r5,r5,r0
        LDRB     r0,[r4,#0x201]
        MOVS     r3,#1
        MOV      r2,r5
        MOV      r1,r4
        BL       disk_write
        SUBS     r6,r6,#1
|L42.86|
        CMP      r6,#2
        BCS      |L42.64|
|L42.90|
        MOV      r0,r7
        POP      {r4-r8,pc}
        ENDP


        AREA ||i.validate||, CODE, READONLY, ALIGN=1

validate PROC
        PUSH     {r4-r6,lr}
        MOV      r5,r0
        MOV      r4,r5
        CBZ      r4,|L43.58|
        LDR      r0,[r4,#0x200]
        CBZ      r0,|L43.58|
        LDR      r0,[r4,#0x200]
        LDRB     r0,[r0,#0x200]
        CBZ      r0,|L43.58|
        LDR      r0,[r4,#0x200]
        LDRH     r0,[r0,#0x206]
        LDRH     r1,[r4,#0x204]
        CMP      r0,r1
        BNE      |L43.58|
        LDR      r1,[r4,#0x200]
        LDRB     r0,[r1,#0x201]
        BL       disk_status
        AND      r0,r0,#1
        CBZ      r0,|L43.62|
|L43.58|
        MOVS     r0,#9
|L43.60|
        POP      {r4-r6,pc}
|L43.62|
        MOVS     r0,#0
        B        |L43.60|
        ENDP


        AREA ||.arm_vfe_header||, DATA, READONLY, NOALLOC, ALIGN=2

        DCD      0x00000000

        AREA ||.bss||, DATA, NOINIT, ALIGN=2

Files
        %        120
LfnBuf
        %        512

        AREA ||.constdata||, DATA, READONLY, ALIGN=0

ExCvt
        DCB      0x80,0x9a,0x90,0xb6
        DCB      0x8e,0xb7,0x8f,0x80
        DCB      0xd2,0xd3,0xd4,0xd8
        DCB      0xd7,0xde,0x8e,0x8f
        DCB      0x90,0x92,0x92,0xe2
        DCB      0x99,0xe3,0xea,0xeb
        DCB      0x59,0x99,0x9a,0x9d
        DCB      0x9c,0x9d,0x9e,0x9f
        DCB      0xb5,0xd6,0xe0,0xe9
        DCB      0xa5,0xa5,0xa6,0xa7
        DCB      0xa8,0xa9,0xaa,0xab
        DCB      0xac,0x21,0xae,0xaf
        DCB      0xb0,0xb1,0xb2,0xb3
        DCB      0xb4,0xb5,0xb6,0xb7
        DCB      0xb8,0xb9,0xba,0xbb
        DCB      0xbc,0xbd,0xbe,0xbf
        DCB      0xc0,0xc1,0xc2,0xc3
        DCB      0xc4,0xc5,0xc7,0xc7
        DCB      0xc8,0xc9,0xca,0xcb
        DCB      0xcc,0xcd,0xce,0xcf
        DCB      0xd0,0xd1,0xd2,0xd3
        DCB      0xd4,0xd5,0xd6,0xd7
        DCB      0xd8,0xd9,0xda,0xdb
        DCB      0xdc,0xdd,0xde,0xdf
        DCB      0xe0,0xe1,0xe2,0xe3
        DCB      0xe5,0xe5,0xe6,0xe7
        DCB      0xe7,0xe9,0xea,0xeb
        DCB      0xed,0xed,0xee,0xef
        DCB      0xf0,0xf1,0xf2,0xf3
        DCB      0xf4,0xf5,0xf6,0xf7
        DCB      0xf8,0xf9,0xfa,0xfb
        DCB      0xfc,0xfd,0xfe,0xff
LfnOfs
        DCB      0x01,0x03,0x05,0x07
        DCB      0x09,0x0e,0x10,0x12
        DCB      0x14,0x16,0x18,0x1c
        DCB      0x1e

        AREA ||.data||, DATA, ALIGN=2

FatFs
        DCD      0x00000000
Fsid
        DCB      0x00,0x00

;*** Start embedded assembler ***

#line 1 "../Middlewares/Third_Party/FatFs/src/ff.c"
	AREA ||.rev16_text||, CODE
	THUMB
	EXPORT |__asm___4_ff_c_3f41df3e____REV16|
#line 388 "../Drivers/CMSIS/Include/cmsis_armcc.h"
|__asm___4_ff_c_3f41df3e____REV16| PROC
#line 389

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.revsh_text||, CODE
	THUMB
	EXPORT |__asm___4_ff_c_3f41df3e____REVSH|
#line 402
|__asm___4_ff_c_3f41df3e____REVSH| PROC
#line 403

 revsh r0, r0
 bx lr
	ENDP
	AREA ||.rrx_text||, CODE
	THUMB
	EXPORT |__asm___4_ff_c_3f41df3e____RRX|
#line 587
|__asm___4_ff_c_3f41df3e____RRX| PROC
#line 588

 rrx r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***

        EXPORT clust2sect [CODE]
        EXPORT f_close [CODE]
        EXPORT f_lseek [CODE]
        EXPORT f_mount [CODE]
        EXPORT f_open [CODE]
        EXPORT f_read [CODE]
        EXPORT f_sync [CODE]
        EXPORT f_write [CODE]
        EXPORT get_fat [CODE]
        EXPORT put_fat [CODE]

        IMPORT ||Lib$$Request$$armlib|| [CODE,WEAK]
        IMPORT disk_write [CODE]
        IMPORT disk_read [CODE]
        IMPORT disk_ioctl [CODE]
        IMPORT ff_wtoupper [CODE]
        IMPORT ff_convert [CODE]
        IMPORT disk_status [CODE]
        IMPORT disk_initialize [CODE]
        IMPORT get_fattime [CODE]

        KEEP check_fs
        KEEP chk_chr
        KEEP chk_lock
        KEEP clear_lock
        KEEP clmt_clust
        KEEP cmp_lfn
        KEEP create_chain
        KEEP create_name
        KEEP dec_lock
        KEEP dir_alloc
        KEEP dir_find
        KEEP dir_next
        KEEP dir_register
        KEEP dir_sdi
        KEEP enq_lock
        KEEP find_volume
        KEEP fit_lfn
        KEEP follow_path
        KEEP gen_numname
        KEEP get_ldnumber
        KEEP inc_lock
        KEEP ld_clust
        KEEP mem_cmp
        KEEP mem_cpy
        KEEP mem_set
        KEEP move_window
        KEEP pick_lfn
        KEEP remove_chain
        KEEP st_clust
        KEEP sum_sfn
        KEEP sync_fs
        KEEP sync_window
        KEEP validate
        KEEP Files
        KEEP LfnBuf
        KEEP ExCvt
        KEEP LfnOfs
        KEEP FatFs
        KEEP Fsid

        ATTR FILESCOPE
        ATTR SETVALUE Tag_ABI_PCS_wchar_t,2
        ATTR SETVALUE Tag_ABI_enum_size,1
        ATTR SETVALUE Tag_ABI_optimization_goals,6
        ATTR SETSTRING Tag_conformance,"2.09"
        ATTR SETVALUE AV,18,1

        ASSERT {ENDIAN} = "little"
        ASSERT {INTER} = {TRUE}
        ASSERT {ROPI} = {FALSE}
        ASSERT {RWPI} = {FALSE}
        ASSERT {IEEE_FULL} = {FALSE}
        ASSERT {IEEE_PART} = {FALSE}
        ASSERT {IEEE_JAVA} = {FALSE}
        END
